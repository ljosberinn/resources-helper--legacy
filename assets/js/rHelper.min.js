const rHelper={init:{user(){"use strict";rHelper.methods.INSRT_userSettings(),rHelper.init.core()},core(){"use strict";rHelper.methods.SET_tabSwitcherAnchorBased(),rHelper.methods.SET_transportCost("init"),$.each(rHelper.data.material,e=>{rHelper.methods.EVNT_materialInput(e),rHelper.methods.INSRT_materialData(e),rHelper.methods.INSRT_warehouseData(e,"material"),rHelper.methods.INSRT_priceHistoryName("material",e)}),rHelper.methods.INSRT_totalMineWorth(rHelper.methods.CALC_totalMineWorth()),rHelper.methods.INSRT_totalMineCount(rHelper.methods.CALC_totalMineCount());let e=rHelper.methods.GET_calculationOrder();$.each(e,(e,t)=>{rHelper.methods.EVNT_factoryInput(t),rHelper.methods.INSRT_factoryDiamondData(t,"product"),rHelper.methods.INSRT_warehouseData(t,"products"),rHelper.methods.INSRT_priceHistoryName("products",t)}),$.each(rHelper.data.loot,e=>{rHelper.methods.INSRT_warehouseData(e,"loot"),rHelper.methods.INSRT_priceHistoryName("loot",e),4==e||e>=10&&e<=13||(rHelper.methods.SET_recyclingProfitObj(e),rHelper.methods.INSRT_recycling(e))});let t=["SET_UnitProfitObj","INSRT_unitsCraftingPrice","INSRT_unitsMarketPrice","INSRT_unitsPricePerStrength"];$.each(rHelper.data.units,e=>{rHelper.methods.INSRT_warehouseData(e,"units"),$.each(t,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.INSRT_unitsRecyclingProfit("units",e),rHelper.methods.INSRT_priceHistoryName("units",e)});let r=["INSRT_buildingName","SET_buildingBackgroundColor","INSRT_buildingData","INSRT_buildingToLevel10","EVNT_buildingChange"];$.each(rHelper.data.buildings,e=>{$.each(r,(t,r)=>{rHelper.methods[r](e)})});let a=["INSRT_headquarterOvwString","INSRT_headquarterOvwRadius","INSRT_headquarterOvwCost","INSRT_headquarterOvwBoost","INSRT_headquarterOvwTransportation","EVNT_switchHeadquarter"];$.each(rHelper.data.headquarter,e=>{$.each(a,(t,r)=>{rHelper.methods[r](e)})});let o=["material"];$.each(o,(e,t)=>{rHelper.methods.EVNT_buildGraph(t)});let l=["buildings","headquarter"];$.each(l,(e,t)=>{rHelper.methods.INSRT_gaugeGraph(t)});let s=["INSRT_materialMineAmortisation","INSRT_materialHighlightMinePerfectIncome","INSRT_totalFactoryUpgrades","INSRT_factoryHighlightColumns","INSRT_diamondTop10Profit","INSRT_diamondTotalProfit","INSRT_flowDistributionGlobal","INSRT_warehouseTotalLevel","INSRT_warehouseTotalWorth","EVNT_priceHistoryOnChange","SET_hqLevel","EVNT_headquarterInput","INSRT_missions","INSRT_techUpgradeRows","EVNT_attackLogTrigger","INSRT_companyWorth","EVNT_sortableTables","EVNT_assignTitleToIcons","EVNT_enableTippy"];$.each(s,(e,t)=>{rHelper.methods[t]()})}},methods:{GET_calculationOrder(){"use strict";return[0,1,2,3,4,7,8,9,10,15,17,18,5,6,13,19,11,12,14,16,20,21]},API_toggleLoadSuccessorHelper(e){"use strict";let t=["API_toggleLoader","API_toggleSuccessor","API_toggleSuccessorHelper"];$.each(t,(t,r)=>{rHelper.methods[r](e)})},API_toggleLoader(e){"use strict";let t=$(`#api-${e}-loading`);"none"==t.css("display")?t.fadeIn("fast").css("display","flex"):t.fadeOut("fast")},API_toggleSuccessor(e){"use strict";let t=$(`#api-${e}-finished`);"none"==t.css("display")?t.fadeIn("fast"):t.fadeOut("fast")},API_toggleSuccessorHelper(e){"use strict";setTimeout(()=>{rHelper.methods.API_toggleSuccessor(e)},15e3)},API_getFactories(e){"use strict";rHelper.methods.API_toggleLoader("factories"),$.get(`api/core.php?query=1&key=${e}`,e=>{$.each(e,(e,t)=>{rHelper.data.products[e].factoryLevel=t});let t=rHelper.methods.GET_calculationOrder();$.each(t,(e,t)=>{rHelper.methods.INSRT_factoryDiamondData(t,"product")}),rHelper.methods.INSRT_totalFactoryUpgrades(),rHelper.methods.INSRT_factoryHighlightColumns(),rHelper.methods.INSRT_diamondTop10Profit(),rHelper.methods.INSRT_diamondTotalProfit(),rHelper.methods.INSRT_flowDistributionGlobal(),rHelper.methods.API_toggleLoadSuccessorHelper("factories"),sorttable.innerSortFunction.apply($("#module-diamond th")[4],[]),sorttable.innerSortFunction.apply($("#module-diamond th")[5],[])})},API_getWarehouse(e){"use strict";rHelper.methods.API_toggleLoader("warehouse"),$.getJSON(`api/core.php?query=2&key=${e}`,e=>{$.each(e,function(e,t){let r=e,a="material";e>=14&&e<36?(r-=14,a="products"):e>=36&&e<52?(r-=36,a="loot"):e>=52&&(r-=52,a="units");let o=5e3*Math.pow(t.level,2),l=t.amount/o;isNaN(l)&&(l=0),rHelper.data[a][r].warehouse.level=t.level,rHelper.data[a][r].warehouse.fillAmount=t.amount,rHelper.data[a][r].warehouse.contingent=o,rHelper.data[a][r].warehouse.fillStatus=l}),$.each(rHelper.data.material,e=>{rHelper.methods.INSRT_warehouseData(e,"material")});let t=rHelper.methods.GET_calculationOrder();$.each(t,e=>{rHelper.methods.INSRT_warehouseData(e,"products")}),$.each(rHelper.data.loot,e=>{rHelper.methods.INSRT_warehouseData(e,"loot")}),$.each(rHelper.data.units,e=>{rHelper.methods.INSRT_warehouseData(e,"units")}),rHelper.methods.INSRT_warehouseTotalLevel(),rHelper.methods.INSRT_warehouseTotalWorth(),rHelper.methods.API_toggleLoadSuccessorHelper("warehouse")})},API_getMineSummary(e){rHelper.methods.API_toggleLoader("mines-summary"),$.get(`api/core.php?query=51&key=${e}`,e=>{$.each(e,(e,t)=>{rHelper.data.material[e].perHour=t.perHour,rHelper.data.material[e].amountOfMines=t.amountOfMines}),$.each(rHelper.data.material,e=>{rHelper.methods.INSRT_materialData(e,"api")}),rHelper.methods.INSRT_totalMineWorth(rHelper.methods.CALC_totalMineWorth()),rHelper.methods.INSRT_totalMineCount(rHelper.methods.CALC_totalMineCount()),rHelper.methods.INSRT_materialMineAmortisation(),rHelper.methods.INSRT_materialHighlightMinePerfectIncome(),rHelper.methods.EVNT_buildGraph("material"),rHelper.methods.INSRT_flowDistributionGlobal(),rHelper.methods.API_toggleLoadSuccessorHelper("mines-summary")})},API_getMineMap(){"use strict";$.getJSON("api/core.php?mineMap",e=>{rHelper.data.mineMap=e,rHelper.methods.API_toggleLoadSuccessorHelper("mines-detailed"),rHelper.methods.EVNT_mapCreation("personal"),rHelper.methods.SET_overTimeGraph()})},API_getMineMapInitiator(e){"use strict";rHelper.methods.API_toggleLoader("mines-detailed"),$.getJSON(`api/core.php?query=5&key=${e}`,e=>{"rHelper.methods.API_getMineMap()"==e.callback?rHelper.methods.API_getMineMap():swal("Error","Couldn't fetch mine details - API potentially unavailable!","error")})},API_getPlayerInfo(e,t){"use strict";rHelper.methods.API_toggleLoader("player");let r=`api/core.php?query=7&key=${e}`;t&&(r+="&anonymity=true"),$.getJSON(r,e=>{rHelper.data.userInformation.level=e.lvl,rHelper.data.userInformation.points=e.points,rHelper.data.userInformation.rank=e.worldrank,e.name&&(rHelper.data.userInformation.name=e.name),rHelper.data.userInformation.registeredGame=rHelper.methods.CALC_convertDateToIso(e.registerdate),rHelper.methods.API_toggleLoadSuccessorHelper("player")})},API_getAttackLog(e,t,r){"use strict";void 0===e&&(e="attackSimple");let a=`api/core.php?attackLog&type=${e}`;t&&(a+=`&target=${t}`),r&&(a+=`&skip=${r}`),$.getJSON(a,t=>{rHelper.data.attackLog=t,rHelper.methods.API_toggleLoadSuccessorHelper("attack-log"),rHelper.methods.INSRT_attackLog(e)})},API_getAttackLogInitiator(e){"use strict";rHelper.methods.API_toggleLoader("attack-log"),$.getJSON(`api/core.php?query=9&key=${e}`,e=>{'rHelper.methods.API_getAttackLog("attackSimple")'!=e.callback&&swal("Error","Couldn't fetch attack log - API potentially unavailable!","error")})},API_getTradeLog(){"use strict";$.getJSON("api/core.php?tradeLog",e=>{rHelper.data.tradeLog=e,rHelper.methods.API_toggleLoadSuccessorHelper("trade-log")})},API_getTradeLogInitiator(e){"use strict";rHelper.methods.API_toggleLoader("trade-log"),$.getJSON(`api/core.php?query=6&key=${e}`,e=>{"rHelper.methods.API_getTradeLog()"==e.callback?rHelper.methods.API_getTradeLog():swal("Error","Couldn't fetch trade log - API potentially unavailable!","error")})},API_getMissions(){"use strict";$.getJSON("api/core.php?missions",e=>{rHelper.data.missions=e,rHelper.methods.API_toggleLoadSuccessorHelper("missions"),rHelper.methods.INSRT_missions()})},API_getMissionsInitiator(e){"use strict";rHelper.methods.API_toggleLoader("missions"),$.getJSON(`api/core.php?query=10&key=${e}`,e=>{"rHelper.methods.API_getMissions()"==e.callback&&rHelper.methods.API_getMissions()})},API_getBuildings(e){"use strict";rHelper.methods.API_toggleLoader("buildings"),$.getJSON(`api/core.php?query=3&key=${e}`,e=>{let t=["INSRT_buildingName","SET_buildingBackgroundColor","INSRT_buildingData","INSRT_buildingToLevel10"];$.each(e,(e,r)=>{rHelper.data.buildings[e].level=r,$.each(t,(t,r)=>{rHelper.methods[r](e)})}),rHelper.methods.INSRT_gaugeGraph("buildings"),rHelper.methods.API_toggleLoadSuccessorHelper("buildings")})},API_getHeadquarter(e){"use strict";rHelper.methods.API_toggleLoader("headquarter"),$.getJSON(`api/core.php?query=4&key=${e}`,e=>{rHelper.data.headquarter.user=rHelper.data.headquarter.user||{hqPosition:{lon:0,lat:0},level:0,paid:[0,0,0,0]},rHelper.data.headquarter.user.hqPosition.lat=e.lat,rHelper.data.headquarter.user.hqPosition.lon=e.lon,rHelper.data.headquarter.user.level=e.level,$.each(e.paid,(e,t)=>{rHelper.data.headquarter.user.paid[e]=t}),rHelper.methods.INSRT_gaugeGraph("headquarter"),rHelper.methods.SET_hqLevel(),rHelper.methods.API_toggleLoadSuccessorHelper("headquarter")})},API_getCreditInformation(e){"use strict";$("#api-credits").html('<span id="api-credits-loading" class="circles-to-rhombuses-spinner"><span class="rhombuses-circle"></span><span class="rhombuses-circle"></span><span class="rhombuses-circle"></span></span>'),$("#api-credits-loading").css("display","flex"),$.get(`api/core.php?query=0&key=${e}`,e=>{let t=parseInt(e[0].creditsleft);rHelper.data.userInformation.remainingCredits=t,rHelper.methods.INSRT_API_remainingCredits(t),$("#api-submit").attr("disabled",!1),$("#api-credits-loading").css("display","none")})},API_init(e,t,r){"use strict";$.isArray(t)&&$.each(t,(t,a)=>{switch(a){case 1:rHelper.methods.API_getFactories(e);break;case 2:rHelper.methods.API_getWarehouse(e);break;case 3:rHelper.methods.API_getBuildings(e);break;case 4:rHelper.methods.API_getHeadquarter(e);break;case 5:rHelper.methods.API_getMineMapInitiator(e);break;case 51:rHelper.methods.API_getMineSummary(e);break;case 6:rHelper.methods.API_getTradeLogInitiator(e);break;case 7:rHelper.methods.API_getPlayerInfo(e,r);break;case 9:rHelper.methods.API_getAttackLogInitiator(e);break;case 10:rHelper.methods.API_getMissionsInitiator(e);break;default:rHelper.methods.API_getCreditInformation(e)}})},API_getWorldMap(e){"use strict";$.getJSON(`api/core.php?worldMap=${e}`,e=>{rHelper.data.worldMap=rHelper.data.worldMap||{},rHelper.data.worldMap=e,rHelper.methods.EVNT_mapCreation("world")})},SET_globalObject(e,t,r,a){"use strict";$.isArray(r)?(rHelper.data[e][t][r[0]][r[1]]=a,console.log(e,t,r[0],r[1],a)):(rHelper.data[e][t][r]=a,console.log(e,t,r,a))},SET_save(){"use strict";localStorage.setItem("rGame",JSON.stringify(rHelper.data))},SET_tabSwitcherAnchorBased(){"use strict";let e=`#${window.location.hash.substr(1)}`;"#"==e&&(e=1!=getCookie("loggedIn")?"#registrationlogin":"#factories"),$(".nav-link").each((t,r)=>{let a=$(r),o=$(`#${r.dataset.target}`);a.attr("href")==e?(o.css("display","block"),a.addClass("active")):(o.css("display","none"),a.removeClass("active"))})},SET_transportCost(e){"use strict";if(rHelper.data.buildings[9].transportCost=1+(15-rHelper.data.buildings[9].level)/100,!e){$.each(rHelper.data.buildings,e=>{let t=["SET_buildingBackgroundColor","INSRT_buildingData","INSRT_buildingToLevel10"];$.each(t,(t,r)=>{rHelper.methods[r](e)})});let e=rHelper.methods.GET_calculationOrder();$.each(e,(e,t)=>{let r=["INSRT_factoryUpgradeCost","INSRT_factoryROI"];$.each(r,(e,r)=>{rHelper.methods[r](t)}),rHelper.methods.INSRT_flowDistributionGlobal()}),$.each(rHelper.data.headquarter,e=>{rHelper.methods.INSRT_headquarterOvwTransportation(e)})}},SET_buildingBackgroundColor(e){"use strict";let t=rHelper.data.buildings[e].level,r=255-10*t,a=127+7*t,o=80-3*t;$(`#building-${e}`).css("background-color",`rgba(${r},${a},${o}, 0.25)`)},SET_buildingTableVisibility(e,t){"use strict";let r=$(`#building-${e} tbody`),a=$(`#building-${e} tfoot`);$.each([r,a],(e,r)=>{switch(t){case"show":"none"==r.css("display")&&r.css("display","table-row-group");break;case"hide":"none"!=r.css("display")&&r.css("display","none")}})},SET_recyclingProfitObj(e){"use strict";rHelper.data.loot[e].profit={outputWorth:0,inputWorth:0,profit:0}},SET_recyclingPlantLevel(){"use strict";$.each(rHelper.data.loot,e=>{if(4==e||e>=10&&e<=13)return;let t=["INSRT_recyclingProducts","INSRT_recyclingOutputWorth","INSRT_recyclingInputWorth"];$.each(t,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.INSRT_unitsRecyclingProfit("recycling",e)})},SET_UnitProfitObj(e){"use strict";rHelper.data.units[e].profit={craftingPrice:0,marketPrice:0,profit:0}},SET_hqLevel(){"use strict";let e=rHelper.data.headquarter;if(e.user){let t=e.user.level;rHelper.methods.SET_hqSelectorClass(t-1),rHelper.methods.INSRT_headquarterPaid();let r=["INSRT_headquarterContentRequiredAmount","INSRT_headquarterMissing","INSRT_headquarterRemainingCost"];$.each(r,(e,r)=>{rHelper.methods[r](t)})}},SET_hqSelectorClass(e){"use strict";for(let t=0;t<=9;t+=1)e!=t?$(`.hq-thumb-${t}`).addClass("disabled-hq"):$(`.hq-thumb-${t}`).removeClass("disabled-hq")},SET_newMap(e,t,r){"use strict";return new google.maps.Map(e[0],{zoom:t,mapTypeId:r})},SET_mapOptions(e,t,r){"use strict";return e.setOptions({maxZoom:t,center:new google.maps.LatLng(r.lat,r.lon)}),e},SET_mapImg(e,t,r){"use strict";return{url:`assets/img/maps/${e}/${t}.png`,scaledSize:new google.maps.Size(r,r)}},SET_mapInfoWindow(e){"use strict";return new google.maps.InfoWindow({content:e})},SET_mapFolderRelation(e){"use strict";let t="foe";return"friend"==e&&(t="friend"),t},SET_mapHQHandler(e,t){"use strict";let r=t.level,a=rHelper.data.headquarter[r-1].radius,o={lat:t.lat,lng:t.lon};rHelper.methods.SET_mapHqCircle(e,o,a,t.relation);let l=12.5*r;new google.maps.Marker({map:e,position:o,icon:rHelper.methods.SET_mapImg("hq",r,l)})},SET_mapHqCircle(e,t,r,a){let o="#FF0000";return"friend"==a&&(o="#00FF00"),new google.maps.Circle({strokeColor:o,strokeOpacity:.8,strokeWeight:2,fillColor:o,fillOpacity:.35,map:e,center:t,radius:r,draggable:!0})},SET_mapMineHandler(e,t,r,a){let o=t.type,l=rHelper.data.material[o],s=rHelper.methods.CALC_toMilliseconds(t.builddate),u=rHelper.methods.CALC_convertDateToIso(s),i=(e-s)/1e3/86400,n=rHelper.methods.CALC_mineEstRevenue(t,o,i),c=rHelper.methods.CALC_createMapContentString(l,u,i,n,t),d=rHelper.methods.SET_mapInfoWindow(c),p=new google.maps.Marker({map:r,position:{lat:t.lat,lng:t.lon},icon:rHelper.methods.SET_mapImg(rHelper.methods.SET_mapFolderRelation(t.relation),o,20)});"personal"==a&&t.builddate==rHelper.data.mineMap.mines[0].builddate&&p.setAnimation(google.maps.Animation.BOUNCE),google.maps.event.addListener(p,"click",()=>{openedWindow&&openedWindow.close(),openedWindow=d,d.open(r,p)})},SET_overTimeGraph(){"use strict";let e=rHelper.data.mineMap.mines,t=[],r=[],a=[],o=[],l=[];for(let e=0;e<=23;e+=1)l.push([`${e} to ${e+1}`,0]);$.each(e,(e,t)=>{let r=new Date(rHelper.methods.CALC_toMilliseconds(t.builddate)).getHours();l[r][1]+=1}),Highcharts.chart("graph-buildinghabits",{chart:{type:"column",backgroundColor:"transparent"},title:{text:"Building habits per hour",style:{color:"#dedede"}},xAxis:{type:"category",labels:{rotation:-45,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif",color:"#dedede"}}},yAxis:{min:0,title:{text:"Amount of mines",style:{color:"#dedede"}},labels:{style:{color:"#dedede"}}},legend:{enabled:!1},tooltip:{pointFormat:"Mines built at this hour: <b>{point.y}</b>"},series:[{name:"Mines",data:l,dataLabels:{enabled:!0,rotation:-90,color:"#dedede",align:"right",y:10,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif",color:"#dedede"}}}]});let s=e[0].builddate,u,i=(e[e.length-1].builddate-s)/86400;t.push(rHelper.methods.CALC_toMilliseconds(s));for(let e=0;e<=i;e+=1){let r=rHelper.methods.CALC_toMilliseconds(s+86400*e);t.push(r)}$.each(t,(l,s)=>{let u=0,i=0,n=0;$.each(e,(e,t)=>{let r;rHelper.methods.CALC_toMilliseconds(t.builddate)<=s&&(u+=1,n+=rHelper.methods.CALC_returnPriceViaId(t.type)*t.fullRate)}),$.each(rHelper.data.material,e=>{i+=rHelper.methods.CALC_materialNewMinePrice(u,e)}),o.push(Math.round(n)),r.push(u),a.push(Math.round(i/14)),t[l]=rHelper.methods.CALC_convertDateToIso(s)}),Highcharts.chart("graph-overtime",{chart:{type:"spline",zoomType:"x",backgroundColor:"transparent"},title:{useHTML:!0,text:"Progress graph",style:{color:"#dedede"}},xAxis:{categories:t,labels:{style:{color:"#dedede"}}},yAxis:{title:{text:"Price or mine count over time",style:{color:"#dedede"}},labels:{formatter:function(){return this.value.toLocaleString("en-US")},style:{color:"#dedede"}}},legend:{enabled:!0,backgroundColor:"#dedede"},tooltip:{crosshairs:!0,shared:!0},plotOptions:{spline:{marker:{radius:4,lineColor:"#666666",lineWidth:1}}},series:[{name:"Mine count",marker:{symbol:"square"},data:r,color:"orange"},{name:"Average cost of a new mine",marker:{symbol:"diamond"},data:a,color:"coral"},{name:"Average income at given time",marker:{symbol:"triangle"},data:o,color:"yellowgreen"}]})},EVNT_enableTippy(){"use strict";$.each($("[title]"),(e,t)=>{t._tippy||tippy(t,{dynamicTitle:!0})})},EVNT_assignTitleToIconsHelper(e,t,r,a){"use strict";for(let o=e;o<=t;o+=1)$.each($(`.resources-${r}-${o}`),(e,t)=>{if(!$(t).attr("title")){let e=o+a;$(t).attr("title",rHelper.methods.CALC_returnPriceViaId(e).toLocaleString("en-US"))}})},EVNT_assignTitleToIcons(){"use strict";rHelper.methods.EVNT_assignTitleToIconsHelper(0,13,"material",0),rHelper.methods.EVNT_assignTitleToIconsHelper(0,21,"product",14),rHelper.methods.EVNT_assignTitleToIconsHelper(0,16,"loot",36),rHelper.methods.EVNT_assignTitleToIconsHelper(0,5,"unit",52)},EVNT_sortableTables(){"use strict";let e=[$("#module-mines table")[0],$("#module-factories table")[0],$("#module-diamond table")[0],$("#techupgrades-combinations-tbl")[0],$("#recycling-tbl")[0],$("#units-tbl")[0]];$.each(e,(e,t)=>{sorttable.makeSortable(t),2==e?sorttable.innerSortFunction.apply($("#module-diamond th")[5],[]):4==e&&(sorttable.innerSortFunction.apply($("#techupgrades-combinations-tbl th")[5],[]),sorttable.innerSortFunction.apply($("#techupgrades-combinations-tbl th")[5],[]))})},EVNT_factoryInput(e){"use strict";$(`#factories-level-${e}`).on("input",function(){let e=parseInt(this.id.replace("factories-level-","")),t=parseInt(this.value);rHelper.methods.SET_globalObject("products",e,"factoryLevel",t);let r=["INSRT_factoryOutput","INSRT_factoryUpgradeCost","INSRT_factoryDependencies","INSRT_factoryWorkload","INSRT_factoryTurnover","INSRT_factoryTurnoverPerUpgrade","INSRT_factoryROI","INSRT_diamondFactoryLevel","INSRT_diamondFactoryOutput","INSRT_diamondFactoryOutputWarehouse","INSRT_diamondDependencies","INSRT_diamondEfficiency","INSRT_diamondProfit"];$.each(r,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.CALC_dependantFactories(e,"product"),rHelper.methods.INSRT_diamondTop10Profit(),rHelper.methods.INSRT_diamondTotalProfit(),rHelper.methods.INSRT_flowRate(e,"product"),rHelper.methods.INSRT_flowDistributionGlobal(),rHelper.methods.INSRT_factoryHighlightColumns()})},EVNT_materialInput(e){"use strict";$(`#material-rate-${e}`).on("input",function(){let e=this.id.replace("material-rate-",""),t=parseInt(this.value);rHelper.methods.SET_globalObject("material",e,"perHour",t),rHelper.methods.INSRT_materialRateWorth(e),rHelper.methods.INSRT_totalMineWorth(rHelper.methods.CALC_totalMineWorth()),rHelper.methods.CALC_dependantFactories(e,"material"),rHelper.methods.INSRT_flowRate(e,"material"),rHelper.methods.INSRT_flowDistributionGlobal(),rHelper.methods.EVNT_buildGraph("material")}),$(`#material-amount-of-mines-${e}`).on("input",function(){let e=this.id.replace("material-amount-of-mines-",""),t=parseInt(this.value);rHelper.methods.SET_globalObject("material",e,"amountOfMines",t),$.each(rHelper.data.material,e=>{rHelper.methods.INSRT_materialNewMinePrice(e)}),rHelper.methods.INSRT_warehouseRemainingTimeToFull(e,"material"),rHelper.methods.INSRT_materialMineAmortisation(),rHelper.methods.INSRT_totalMineCount(rHelper.methods.CALC_totalMineCount()),rHelper.methods.EVNT_buildGraph("material")})},EVNT_warehouseInput(e,t){"use strict";$(`#warehouse-${t}-calc-2-${e}`).on("input",function(){let r=parseInt(this.value);isNaN(r)&&(r=0),rHelper.methods.INSRT_warehouseUpgradeCost(e,t,r)}),$(`#warehouse-${t}-calc-1-${e}`).on("change",()=>{$(`#warehouse-${t}-upgrade-cost-${e}`).empty(),$(`#warehouse-${t}-calc-2-${e}`).val(0)}),$(`#warehouse-${t}-stock-current-${e}`).on("input",function(){let r=parseInt(this.value);isNaN(r)&&(r=0);let a=r/rHelper.data[t][e].warehouse.contingent;rHelper.methods.SET_globalObject(t,e,["warehouse","fillAmount"],r),rHelper.methods.SET_globalObject(t,e,["warehouse","fillStatus"],a);let o=["INSRT_warehouseWorth","INSRT_warehouseFillStatus","INSRT_warehouseRemainingTimeToFull"];$.each(o,(r,a)=>{rHelper.methods[a](e,t)}),rHelper.methods.INSRT_warehouseTotalWorth()}),$(`#warehouse-${t}-level-${e}`).on("input",function(){let r=parseInt(this.value);isNaN(r)&&(r=0);let a=rHelper.data[t][e].warehouse;rHelper.methods.SET_globalObject(t,e,["warehouse","level"],r),rHelper.methods.SET_globalObject(t,e,["warehouse","contingent"],rHelper.methods.CALC_warehouseContingent(r)),rHelper.methods.SET_globalObject(t,e,["warehouse","fillStatus"],a.fillAmount/a.contingent);let o=["INSRT_warehouseCapacity","INSRT_warehouseFillStatus","INSRT_warehouseRemainingTimeToFull"];$.each(o,(r,a)=>{rHelper.methods[a](e,t)}),rHelper.methods.INSRT_warehouseTotalLevel()})},EVNT_buildingChange(e){"use strict";$(`#buildings-level-${e}`).on("change",function(){let t=parseInt(this.value);rHelper.methods.SET_globalObject("buildings",e,"level",t),9==e?rHelper.methods.SET_transportCost():5==e&&rHelper.methods.SET_recyclingPlantLevel(),3!=e&&4!=e&&9!=e||$.each(rHelper.data.units,e=>{rHelper.methods.INSRT_unitsPricePerStrength(e)});let r=["INSRT_buildingData","INSRT_buildingToLevel10","SET_buildingBackgroundColor"];$.each(r,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.INSRT_gaugeGraph("buildings")})},EVNT_buildGraph(e){"use strict";rHelper.graphs=rHelper.graphs||{};let t=rHelper.graphs.material;rHelper.graphs.material.reference.mineCount=rHelper.methods.CALC_totalMineCount(),rHelper.graphs.material.reference.mineIncome=rHelper.methods.CALC_totalMineWorth(),$.each(rHelper.data.material,(e,t)=>{let r={y:0,color:"",drilldown:{categories:[],data:[],color:""}},a=parseFloat((t.amountOfMines/rHelper.graphs.material.reference.mineCount*100).toFixed(2)),o=parseFloat((rHelper.methods.CALC_materialRateWorth(e)/rHelper.graphs.material.reference.mineIncome*100).toFixed(2)),l=t.name;isNaN(a)?r.y=0:r.y=a;let s={name:l,y:r.y,color:r.color};r.color=rHelper.graphs.material.colors[e],r.drilldown.color=rHelper.graphs.material.colors[e],r.drilldown.categories[e]=l,r.drilldown.name=l,isNaN(o)?r.drilldown.data[e]=0:r.drilldown.data[e]=o,JSON.stringify(rHelper.graphs.material.mineData[e])!==JSON.stringify(s)&&(rHelper.graphs.material.mineData[e]=s);let u=r.drilldown.data.length,i=0;for(let t=0;t<u;t+=1)i=.2-t/u/5,rHelper.graphs.material.incomeData[e]={name:r.drilldown.categories[t],y:r.drilldown.data[t],color:Highcharts.Color(r.color).brighten(i).get()};JSON.stringify(rHelper.graphs.material.data[e])!==JSON.stringify(r)&&(rHelper.graphs.material.data[e]=r)}),rHelper.methods.INSRT_polygonGraph(t.target,t.titleText,t.seriesNames,t.responsiveId,e)},EVNT_switchHeadquarter(e){"use strict";$(`.hq-thumb-${e}`).on("click",()=>{let t=parseInt(e)+1;rHelper.data.headquarter.user=rHelper.data.headquarter.user||{},rHelper.data.headquarter.user.paid=rHelper.data.headquarter.user.paid||[0,0,0,0],rHelper.data.headquarter.user.level=rHelper.data.headquarter.user.level||t,rHelper.methods.SET_globalObject("headquarter","user","level",t),rHelper.methods.SET_hqSelectorClass(e),rHelper.methods.INSRT_gaugeGraph("headquarter"),rHelper.methods.INSRT_headquarterContentRequiredAmount(t),rHelper.methods.INSRT_headquarterPaid();for(let e=0;e<=3;e+=1)rHelper.methods.INSRT_headquarterMissing(e);rHelper.methods.INSRT_headquarterRemainingCost(t),rHelper.methods.INSRT_companyWorth()})},EVNT_headquarterInput(){"use strict";$.each($("[id*='hq-content-input-']"),(e,t)=>{$(t).on("input",function(){let t=parseInt(this.id.replace(/hq-content-input-/,"")),r=parseInt(this.value);isNaN(r)?r=0:r>5e7&&(r=5e7),rHelper.methods.SET_globalObject("headquarter","user",["paid",t],r),rHelper.methods.INSRT_headquarterMissing(e),rHelper.methods.INSRT_headquarterRemainingCost(rHelper.data.headquarter.user.level),rHelper.methods.INSRT_gaugeGraph("headquarter"),rHelper.methods.INSRT_companyWorth()})})},EVNT_priceHistoryOnChange(){"use strict";$("#pricehistory-selector").on("change",function(){let e=parseInt(this.value),t=`api/getPriceHistory.php?id=${e}`,r=rHelper.methods.CALC_convertId(e),a=`<span style="height: 25px; width: 25px;" class="${r.icon}"></span> ${r.name}`;rHelper.methods.EVNT_priceHistoryToggler("loading"),$.getJSON(t,e=>{let t=e.avg.ki,r=e.avg.player,o=[],l=[],s=[];$.each(e.data,(e,t)=>{let r=rHelper.methods.CALC_convertDateToIso(rHelper.methods.CALC_toMilliseconds(t.ts));o.push(r),0==t.player&&(t.player=null),l.push(t.player),s.push(t.ki)}),rHelper.methods.EVNT_priceHistoryToggler("finished"),rHelper.methods.INSRT_priceHistoryGraph(a,t,r,o,l,s)})})},EVNT_priceHistoryToggler(e){"use strict";let t=$("#graph-pricehistory"),r=$("#pricehistory-selector");switch(e){case"loading":let a='<svg id="pricehistory-svg" xmlns="http://www.w3.org/2000/svg" style="background:0 0" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><g transform="translate(50 50)"><g transform="matrix(.6 0 0 .6 -19 -19)"><g transform="rotate(242)"><animateTransform attributeName="transform" begin="0s" dur="3s" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="0;360"/><path fill="#9acd32" d="M37.3496988-7h10V7h-10a38 38 0 0 1-1.50391082 5.61267157l8.66025404 5-7 12.12435565-8.66025404-5a38 38 0 0 1-4.10876076 4.10876076l5 8.66025404-12.12435565 7-5-8.66025404A38 38 0 0 1 7 37.34969879v10H-7v-10a38 38 0 0 1-5.61267157-1.50391081l-5 8.66025404-12.12435565-7 5-8.66025404a38 38 0 0 1-4.10876076-4.10876076l-8.66025404 5-7-12.12435565 8.66025404-5A38 38 0 0 1-37.34969879 7h-10V-7h10a38 38 0 0 1 1.50391081-5.61267157l-8.66025404-5 7-12.12435565 8.66025404 5a38 38 0 0 1 4.10876076-4.10876076l-5-8.66025404 12.12435565-7 5 8.66025404A38 38 0 0 1-7-37.34969879v-10H7v10a38 38 0 0 1 5.61267157 1.50391081l5-8.66025404 12.12435565 7-5 8.66025404a38 38 0 0 1 4.10876076 4.10876076l8.66025404-5 7 12.12435565-8.66025404 5A38 38 0 0 1 37.34969879-7M0-30a30 30 0 1 0 0 60 30 30 0 1 0 0-60"/></g></g><g transform="matrix(.6 0 0 .6 19 19)"><g transform="rotate(103)"><animateTransform attributeName="transform" begin="-0.125s" dur="3s" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="360;0"/><path fill="coral" d="M37.3496988-7h10V7h-10a38 38 0 0 1-1.50391082 5.61267157l8.66025404 5-7 12.12435565-8.66025404-5a38 38 0 0 1-4.10876076 4.10876076l5 8.66025404-12.12435565 7-5-8.66025404A38 38 0 0 1 7 37.34969879v10H-7v-10a38 38 0 0 1-5.61267157-1.50391081l-5 8.66025404-12.12435565-7 5-8.66025404a38 38 0 0 1-4.10876076-4.10876076l-8.66025404 5-7-12.12435565 8.66025404-5A38 38 0 0 1-37.34969879 7h-10V-7h10a38 38 0 0 1 1.50391081-5.61267157l-8.66025404-5 7-12.12435565 8.66025404 5a38 38 0 0 1 4.10876076-4.10876076l-5-8.66025404 12.12435565-7 5 8.66025404A38 38 0 0 1-7-37.34969879v-10H7v10a38 38 0 0 1 5.61267157 1.50391081l5-8.66025404 12.12435565 7-5 8.66025404a38 38 0 0 1 4.10876076 4.10876076l8.66025404-5 7 12.12435565-8.66025404 5A38 38 0 0 1 37.34969879-7M0-30a30 30 0 1 0 0 60 30 30 0 1 0 0-60"/></g></g></g></svg>';t.html(a),r.attr("disabled",!0);break;case"finished":t.empty(),r.attr("disabled",!1)}},EVNT_mapCreation(e){"use strict";let t,r,a,o;switch(e){case"personal":t=$("#personalmap"),r=rHelper.data.mineMap,a=$("#personalmap-info"),o='Your mine map is empty! Please import "Mines - detailed" via API first.';break;case"world":t=$("#worldmap"),r=rHelper.data.worldMap,a=$("#worldmap-info"),o="An error occured. If this problem persists, please report this issue via Discord or mail."}if(0!=r.length){let a=new Date,o=rHelper.methods.SET_newMap(t,12,"terrain");switch(o=rHelper.methods.SET_mapOptions(o,16,r.mines[0]),e){case"personal":rHelper.methods.SET_mapHQHandler(o,r.hq[0]);break;case"world":$.each(r.hqs,(e,t)=>{rHelper.methods.SET_mapHQHandler(o,t)})}$.each(r.mines,(t,r)=>{rHelper.methods.SET_mapMineHandler(a,r,o,e)})}else a.text(o)},EVNT_attackLogTrigger(){$("#heading-defenselog a").on("click",e=>{e.preventDefault(),rHelper.methods.API_getAttackLog("defenseSimple")}),$("#heading-attacklog-1 a").on("click",e=>{e.preventDefault(),rHelper.methods.API_getAttackLog("attackSimple")}),$("#heading-attacklog-2 a").on("click",e=>{e.preventDefault(),rHelper.methods.API_getAttackLog("attackDetailed")})},INSRT_attackLogDetailedGeneralInformation(e){$("#attacklog-detailed-units-lost-avg").html(rHelper.methods.CALC_attackLogDetailedUnitStringInsertion("offense",e.avg.unitsLost)),$("#attacklog-detailed-units-lost-total").html(rHelper.methods.CALC_attackLogDetailedUnitStringInsertion("offense",e.total.unitsLost)),$("#attacklog-detailed-factor-avg").text(`${e.avg.factor}%`),$("#attacklog-detailed-profit-avg").text(e.avg.profit.toLocaleString("en-US")),$("#attacklog-detailed-profit-total").text(e.total.profit.toLocaleString("en-US"))},INSRT_attackLogDetailed(e,t){let r=$("#attacklog-tbody-detailed");r.empty();let a=$("#attacklog-detailed-selector");2==a[0].children.length&&$.each(t.validTargets,(e,t)=>{a.append(`<option value="${t}">${t}</option>`)});let o=$("#collapse-attacklog-detailed table")[1],l=["Attacked player (level)","Timestamp & position","Units lost","Units destroyed","Lootfactor","Loot","Profit"];$.each(t.data,(e,t)=>{r.append(rHelper.methods.CALC_attackLogDetailedDatasetIteration(e,t,l))}),rHelper.methods.INSRT_attackLogDetailedGeneralInformation(t),["last","next"].forEach(e=>{rHelper.methods.CALC_attackLogDetailedPageButtonToggler(e,t)}),sorttable.makeSortable(o)},INSRT_ADLogSimple(e,t){let r=$("#attacklog-tbody-simple");r.empty();let a=["Attacked player (last known level)","Last attacked","Total attacks","Win","Loss","Average loot factor","Average amount of units used","Profit"],o=[0,2,3],l="text-md-right text-sm-left",s=$("#collapse-attacklog-simple table")[0];"defenseSimple"==e&&(a[0]="Attacking player (last known level)",s=$("#collapse-defenselog-simple table")[0],r=$("#defenselog-tbody-simple")),$.each(t,(t,s)=>{let u=$(crEl("tr")),i="bg-success-25";for(let t=0;t<=7;t+=1){let r=$(crEl("td")).attr("data-th",a[t]),n=0,c=0,d=0,p="";switch(t){case 0:r.text(`${s.targetName} (${s.targetLevel})`);break;case 1:r.text(rHelper.methods.CALC_convertDateToIso(s.lastAttacked));break;case 2:c=(s.sumWin/s.sumAttacks*100).toFixed(2),r.text(`${s.sumAttacks.toLocaleString("en-US")} (${c}%)`).addClass(l);break;case 3:"defenseSimple"==e?(n=s.sumAttacks-s.sumWin,r.text(n.toLocaleString("en-US")).addClass(l)):"attackSimple"==e&&r.text(s.sumWin.toLocaleString("en-US")).addClass(l);break;case 4:"defenseSimple"==e?r.text(s.sumWin.toLocaleString("en-US")).addClass(l):"attackSimple"==e&&(n=s.sumAttacks-s.sumWin,r.text(n.toLocaleString("en-US")).addClass(l));break;case 5:s.factor<1&&(i="bg-warning-25"),d=(100*s.factor).toFixed(2),r.text(`${d}%`).addClass(`${l} ${i}`);break;case 6:for(let e=0;e<=2;e+=1){let t=$(crEl("span"));t.addClass(`resources-unit-${o[e]}`);let r=s[`unit${e}`];null==r&&(r=0),p+=`${t[0].outerHTML} ${r.toLocaleString("en-US")} `}r.html(p);break;case 7:let a=s.profit;null==a&&(a=0);let u=s.unitLossValue;null!=u&&(a-=u),r.text(a.toLocaleString("en-US")).addClass(l)}u.addClass(rHelper.methods.CALC_attackLogSetTRColor(s.profit)).append(r)}r.append(u)}),sorttable.makeSortable(s)},INSRT_attackLog(e){let t=rHelper.data.attackLog,r;switch(e){case"attackSimple":case"defenseSimple":r="INSRT_ADLogSimple";break;case"attackDetailed":r="INSRT_attackLogDetailed"}rHelper.methods[r](e,t)},INSRT_materialData(e,t){"use strict";let r=["INSRT_materialRate","INSRT_materialAmountOfMines","INSRT_materialNewMinePrice","INSRT_materialRateWorth","INSRT_materialNewMinePerfectIncome"];$.each(r,(t,r)=>{rHelper.methods[r](e)}),t&&rHelper.methods.CALC_dependantFactories(e,"material"),rHelper.methods.INSRT_flowRate(e,"material")},INSRT_factoryDiamondData(e,t){"use strict";let r=["INSRT_factoryLevel","INSRT_factoryOutput","INSRT_factoryUpgradeCost","INSRT_factoryDependencies","INSRT_factoryWorkload","INSRT_factoryTurnover","INSRT_factoryTurnoverPerUpgrade","INSRT_factoryROI","INSRT_diamondFactoryOutput","INSRT_diamondFactoryOutputWarehouse","INSRT_diamondDependencies","INSRT_diamondEfficiency","INSRT_diamondProfit"];$.each(r,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.INSRT_flowRate(e,t)},INSRT_recycling(e){"use strict";let t=["INSRT_recyclingRequirement","INSRT_recyclingProducts","INSRT_recyclingOutputWorth","INSRT_recyclingInputWorth"];$.each(t,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.INSRT_unitsRecyclingProfit("recycling",e)},INSRT_warehouseData(e,t){"use strict";let r=["INSRT_warehouseFillAmount","INSRT_warehouseLevel","INSRT_warehouseFillStatus","INSRT_warehouseCapacity","INSRT_warehouseWorth","EVNT_warehouseInput"];$.each(r,(r,a)=>{rHelper.methods[a](e,t)}),"products"!=t&&"material"!=t||rHelper.methods.INSRT_warehouseRemainingTimeToFull(e,t)},INSRT_priceHistoryGraph(e,t,r,a,o,l){"use strict";Highcharts.chart("graph-pricehistory",{chart:{type:"spline",zoomType:"x"},title:{useHTML:!0,text:`Price history for ${e}`},subtitle:{text:"last 28 days"},xAxis:{categories:a},yAxis:{title:{text:"Price"},labels:{formatter:function(){return this.value.toLocaleString("en-US")}},plotLines:[{color:"red",value:t,width:"1",zIndex:5,label:{text:`average KI price of ${t.toLocaleString("en-US")}`,align:"right",style:{color:"darkgreen"}}},{color:"darkgreen",value:r,width:"1",zIndex:5,label:{text:`average player price of ${r.toLocaleString("en-US")}`,align:"right",style:{color:"orange"}}}]},legend:{enabled:!1},tooltip:{crosshairs:!0,shared:!0},plotOptions:{spline:{marker:{radius:4,lineColor:"#666666",lineWidth:1}}},series:[{name:"KI",marker:{symbol:"square"},color:"darkgreen",data:l},{name:"Player",marker:{symbol:"diamond"},color:"orange",data:o}]})},INSRT_polygonGraph(e,t,r,a,o){"use strict";let l=rHelper.graphs[o];Highcharts.chart(e,{chart:{type:"pie",backgroundColor:"transparent"},title:{text:t,style:{color:"#dedede"}},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:r[0],data:l.mineData,colors:l.colors,size:"60%",dataLabels:{formatter:function(){return this.y>5?this.point.name:null},color:"#dedede",distance:-30}},{name:r[1],data:l.incomeData,colors:l.colors,size:"80%",innerSize:"60%",dataLabels:{formatter:function(){return this.y>1?`<b> ${this.point.name} :</b> + ${this.y} %`:null},style:{color:"white",textOutline:"none"}},id:a}],responsive:{rules:[{condition:{maxWidth:400},chartOptions:{series:[{id:a,dataLabels:{enabled:!1}}]}}]}})},INSRT_gaugeGraph(e){"use strict";"buildings"==e?Highcharts.chart("graph-buildings",Highcharts.merge(rHelper.graphs.gaugeOptions,{yAxis:{min:0,max:rHelper.methods.CALC_perfectWorth("buildings"),title:{text:"total building worth"}},series:[{name:"total building worth",data:[rHelper.methods.CALC_totalBuildingErectionSum()]}]})):"headquarter"==e&&Highcharts.chart("graph-headquarter",Highcharts.merge(rHelper.graphs.gaugeOptions,{yAxis:{min:0,max:rHelper.methods.CALC_perfectWorth("headquarter"),title:{text:"total headquarter worth"}},series:[{name:"total headquarter worth",data:[rHelper.methods.CALC_totalHeadquarterErectionSum()]}]}))},INSRT_totalMineWorth(e){"use strict";$("#material-total-worth").text(e.toLocaleString("en-US"))},INSRT_totalMineCount(e){"use strict";$("#material-total-mine-count").text(e.toLocaleString("en-US"))},INSRT_materialRate(e){"use strict";$(`#material-rate-${e}`).val(rHelper.data.material[e].perHour)},INSRT_materialAmountOfMines(e){"use strict";$(`#material-amount-of-mines-${e}`).val(rHelper.data.material[e].amountOfMines)},INSRT_userSettings(){"use strict";let e=rHelper.data.userInformation;$("#security-token").text(e.securityToken),""!=e.realKey&&void 0!==typeof e.realKey&&($("#api-key").val(e.realKey),rHelper.methods.INSRT_API_remainingCredits(e.remainingCredits)),""!=e.name&&$("#api-player-anonymity")[0].parentNode.remove(),$.each(rHelper.data.settings,(e,t)=>{let r=0;switch(t.setting){case"lang":switch(t.value){case"de":r=0;break;case"en":r=1;break;case"fr":r=2;break;case"in":r=3;break;case"jp":r=4;break;case"ru":r=5}$("#settings-language").val(r);break;case"customTU":for(let e=0;e<=3;e+=1)$(`#settings-custom-tu-${e+1}`).val(t.value[e]);break;case"idealCondition":1===t.value&&$("#settings-ideal-conditions").prop("checked",!0);break;case"transportCostInclusion":1===t.value&&$("#settings-toggle-transport-cost-inclusion").prop("checked",!0);break;case"mapVisibleHQ":1===t.value&&$("#settings-hq-visibility").val(1);break;case"priceAge":$("#settings-price-age").val(t.value)}})},INSRT_materialNewMinePrice(e){"use strict";$(`#material-new-price-${e}`).text(rHelper.methods.CALC_materialNewMinePrice(rHelper.methods.CALC_totalMineCount(),e).toLocaleString("en-US"))},INSRT_materialRateWorth(e){"use strict";$(`#material-worth-${e}`).text(rHelper.methods.CALC_materialRateWorth(e).toLocaleString("en-US"))},INSRT_materialMineAmortisation(){"use strict";let e=rHelper.methods.CALC_materialMineROI("100"),t=rHelper.methods.CALC_materialMineROI("505"),r=rHelper.methods.CALC_materialMineROI("505hq");$.each(e,(e,t)=>{$(`#material-roi-100-${e}`).text(t.toFixed(2).toLocaleString("en-US"))}),$.each(t,(e,t)=>{$(`#material-roi-500-${e}`).text(t.toFixed(2).toLocaleString("en-US"))}),$.each(r,(e,t)=>{$(`#material-roi-x-${e}`).text(t.toFixed(2).toLocaleString("en-US"))}),rHelper.methods.INSRT_materialHighlightColumns(e,"#material-roi-100-","text-success","text-danger"),rHelper.methods.INSRT_materialHighlightColumns(t,"#material-roi-500-","text-success","text-danger"),rHelper.methods.INSRT_materialHighlightColumns(r,"#material-roi-x-","text-success","text-danger")},INSRT_materialNewMinePerfectIncome(e){"use strict";$(`#material-perfect-income-${e}`).text(rHelper.methods.CALC_materialMinePerfectIncome(e).toLocaleString("en-US"))},INSRT_materialHighlightMinePerfectIncome(){"use strict";let e=[];$.each(rHelper.data.material,t=>{e.push(rHelper.methods.CALC_materialMinePerfectIncome(t))}),rHelper.methods.INSRT_materialHighlightColumns(e,"#material-perfect-income-","text-danger","text-success")},INSRT_materialHighlightColumns(e,t,r,a){"use strict";let o=["min","max"],l=0,s,u;$.each(o,(o,i)=>{switch(i){case"min":l=e.min(),s=r,u=a;break;case"max":l=e.max(),s=a,u=r}let n;$(t+e.indexOf(l)).removeClass(u).addClass(s)})},INSRT_factoryLevel(e){"use strict";let t=rHelper.data.products[e].factoryLevel;$(`#factories-level-${e}`).val(t),$(`#diamond-level-${e}`).text(t)},INSRT_factoryOutput(e){"use strict";$(`#factories-product-${e}`).text(rHelper.methods.CALC_factoryOutput(e).toLocaleString("en-US"))},INSRT_factoryUpgradeCost(e){"use strict";let t=$(`#factories-upgrade-cost-${e}`),r=rHelper.methods.CALC_factoryUpgradeCost(e);t.text(r.sum.toLocaleString("en-US")),t.attr("title",r.title),applyTippyOnNewElement(t)},INSRT_totalFactoryUpgrades(){"use strict";$("#factories-total-upgrades").text(rHelper.methods.CALC_totalFactoryUpgrades().toLocaleString("en-US"))},INSRT_factoryDependencies(e){"use strict";let t,r=rHelper.data.products[e].dependencies,a="";if($.isArray(r))$.each(r,(t,r)=>{let o=rHelper.methods.CALC_convertId(r),l=rHelper.methods.CALC_returnPriceViaId(r).toLocaleString("en-US"),s=rHelper.methods.CALC_factoryDependencyRequiredAmount(e,t),u=rHelper.methods.CALC_factoryDependencyExistingAmount(o,t),i=rHelper.methods.CALC_factoryComparatorRequiredVsExistingAmount(s,u),n=$(crEl("span")),c=$(crEl("span")),d=$(crEl("span"));c.addClass(o.icon).attr("title",l.toLocaleString("en-US")),d.addClass(i).text(s.toLocaleString("en-US")),n.append(`${c[0].outerHTML} ${d[0].outerHTML} `),a+=n[0].outerHTML});else{let t=rHelper.methods.CALC_convertId(r),o=rHelper.methods.CALC_returnPriceViaId(r).toLocaleString("en-US"),l=rHelper.methods.CALC_factoryDependencyRequiredAmount(e,0),s=rHelper.methods.CALC_factoryDependencyExistingAmount(t,0),u=rHelper.methods.CALC_factoryComparatorRequiredVsExistingAmount(l,s),i=$(crEl("span")),n=$(crEl("span")),c=$(crEl("span"));n.addClass(t.icon).attr("title",o.toLocaleString("en-US")),c.addClass(u).text(l.toLocaleString("en-US")),i.append(`${n[0].outerHTML} ${c[0].outerHTML} `),a+=i[0].outerHTML}$(`#factories-dependencies-${e}`).html(a)},INSRT_factoryAmortisation(e){"use strict";let t=`#factories-roi-${e}`,r=rHelper.methods.CALC_factoryAmortisation(e);r=r<0||r==1/0?"∞":r.toFixed(2),$(t).text(r)},INSRT_factoryWorkload(e){"use strict";let t=$(`#factories-workload-${e}`),r=rHelper.data.products[e].dependencies;if(rHelper.data.products[e].dependencyWorkload=[],$.isArray(r))$.each(r,t=>{let r=rHelper.methods.CALC_factoryDepedencyWorkload(e,t);rHelper.data.products[e].dependencyWorkload.push(r)});else{let t=rHelper.methods.CALC_factoryDepedencyWorkload(e,0);rHelper.data.products[e].dependencyWorkload.push(t)}let a=rHelper.methods.CALC_factoryWorkloadMinNonSanitized(e),o,l;a>=1?(o="text-danger",l="text-success"):(o="text-success",l="text-danger"),t.removeClass(o).addClass(l),t.text((100*a).toFixed(2)+" %")},INSRT_factoryTurnover(e){"use strict";let t=$(`#factories-turnover-${e}`),r=rHelper.methods.CALC_factoryTurnover(e),a,o;r<=0?(a="text-success",o="text-danger"):(a="text-danger",o="text-success"),rHelper.data.products[e].turnover=r,t.removeClass(a).addClass(o),t.text(r.toLocaleString("en-US"))},INSRT_factoryHighlightColumns(){"use strict";let e,t=["#factories-upgrade-cost-","#factories-increase-per-upgrade-","#factories-roi-","#diamond-profit-"];$.each(t,(t,r)=>{switch(t){case 0:e="upgradeCost";break;case 1:e="turnoverIncrease";break;case 2:e="roi";break;case 3:e=[]}let a=[],o=[];$.each(rHelper.data.products,(t,l)=>{$(r+t).removeClass("text-success text-danger");let s=0;s="object"==typeof e?l.diamond.profit:l[e],rHelper.data.products[t].turnover>0&&s!=-1/0&&s!=1/0&&s>0&&(a.push(s),o.push(t))});let l=o[a.indexOf(a.min())],s=o[a.indexOf(a.max())];switch(t){case 0:case 2:$(r+l).addClass("text-success"),l!=s&&$(r+s).addClass("text-danger");break;case 1:case 3:$(r+s).addClass("text-success"),l!=s&&$(r+l).addClass("text-danger")}})},INSRT_factoryROI(e){"use strict";let t=$(`#factories-roi-${e}`),r=rHelper.methods.CALC_factoryROI(e);rHelper.data.products[e].roi=r,r=r<0||r===1/0?"∞":r.toFixed(2),t.text(r.toLocaleString("en-US"))},INSRT_factoryTurnoverPerUpgrade(e){"use strict";let t=$(`#factories-increase-per-upgrade-${e}`),r=rHelper.methods.CALC_factoryTurnoverPerUpgrade(e);rHelper.data.products[e].turnoverIncrease=r,t.text(r.toLocaleString("en-US"))},INSRT_API_remainingCredits(e){"use strict";$("#api-credits").text(e.toLocaleString("en-US")+" Credits left")},INSRT_diamondFactoryOutput(e){"use strict";$(`#diamond-product-${e}`).text(rHelper.methods.CALC_diamondFactoryOutput(e).toLocaleString("en-US"))},INSRT_diamondFactoryOutputWarehouse(e){"use strict";let t=rHelper.methods.CALC_diamondFactoryOutput(e),r=rHelper.methods.CALC_nextGreaterWarehouseLevel(t);$(`#diamond-product-warehouse-${e}`).text(r.toLocaleString("en-US"))},INSRT_diamondDependenciesHelper(e,t,r,a,o){"use strict";let l=rHelper.methods.CALC_nextGreaterWarehouseLevel(r);rHelper.data.products[a].diamond.dependenciesWorth+=t*r;let s=$(crEl("span")).addClass(e.icon).attr("title",t.toLocaleString("en-US")),u=$(crEl("span")).text(r.toLocaleString("en-US")),i=$(crEl("span")).text(l),n=$(crEl("kbd")).append(`${o[0].outerHTML} ${i[0].outerHTML}`),c;return $(crEl("span")).append(`${s[0].outerHTML} ${u[0].outerHTML} ${n[0].outerHTML} `)[0].outerHTML},INSRT_diamondDependencies(e){"use strict";let t,r=rHelper.data.products[e].dependencies,a="",o=$(crEl("span")).addClass("nav-icon-warehouses");if($.isArray(r))$.each(r,(t,r)=>{let l=rHelper.methods.CALC_convertId(r),s=rHelper.methods.CALC_returnPriceViaId(r),u=5*rHelper.methods.CALC_factoryDependencyRequiredAmount(e,t)*24;a+=rHelper.methods.INSRT_diamondDependenciesHelper(l,s,u,e,o)});else{let t=rHelper.methods.CALC_convertId(r),l=rHelper.methods.CALC_returnPriceViaId(r),s=5*rHelper.methods.CALC_factoryDependencyRequiredAmount(e,0)*24;a+=rHelper.methods.INSRT_diamondDependenciesHelper(t,l,s,e,o)}$(`#diamond-dependencies-${e}`).html(a)},INSRT_diamondEfficiency(e){"use strict";$(`#diamond-efficiency-${e}`).text((100*rHelper.methods.CALC_diamondEfficiency(e)).toFixed(2).toLocaleString("en-US")+"%")},INSRT_diamondProfit(e){"use strict";$(`#diamond-profit-${e}`).text(rHelper.methods.CALC_diamondProfit(e).toLocaleString("en-US"))},INSRT_diamondFactoryLevel(e){"use strict";$(`#diamond-level-${e}`).text(rHelper.data.products[e].factoryLevel)},INSRT_diamondTop10Profit(){"use strict";let e=rHelper.methods.CALC_diamondTop10Profit().toLocaleString("en-US");$("#diamond-top-10").text(e)},INSRT_diamondTotalProfit(){"use strict";let e=rHelper.methods.CALC_diamondTotalProfit().toLocaleString("en-US");$("#diamond-total").text(e)},INSRT_flowRate(e,t){"use strict";let r=$(`#flow-${t}-rate-${e}`),a=rHelper.methods.CALC_flowRate(e,t);"product"==t&&rHelper.data.products[e].turnover<0&&(a=0),r.text(a.toLocaleString("en-US"))},INSRT_flowDistributionGlobal(){"use strict";let e=0,t=0,r="yellowgreen",a="yellowgreen";$.each(rHelper.data.material,t=>{e+=rHelper.methods.INSRT_flowDistributionSingle(t,"material")});let o=rHelper.methods.GET_calculationOrder();$.each(o,(e,r)=>{t+=rHelper.methods.INSRT_flowDistributionSingle(r,"product")}),e<0&&(r="coral"),t<0&&(a="coral"),rHelper.data.material.totalIncomePerHour=e,rHelper.data.products.totalIncomePerHour=t,$("#flow-material-total").text(e.toLocaleString("en-US")).css("color",r),$("#flow-products-total").text(t.toLocaleString("en-US")).css("color",a),$("#effective-hourly-income").text((e+t).toLocaleString("en-US"))},INSRT_flowSurplus(e,t,r){"use strict";let a=$(`#flow-${t}-surplus-${e}`),o="#dedede";r<=0&&(o="coral"),a.css("color",o),a.html(`<span class="resources-${t}-${e}"></span> ${r.toLocaleString("en-US")}`)},INSRT_flowDistributionSingle(e,t){"use strict";let r=$(`#flow-${t}-worth-${e}`),a=0,o=0,l=rHelper.methods.CALC_flowDistribution(e,t),s="yellowgreen",u=0;switch(t){case"material":a=rHelper.methods.CALC_returnPriceViaId(e);break;case"product":a=rHelper.methods.CALC_returnPriceViaId(e+14)}switch("product"==t&&(rHelper.data.products[e].turnover<0?(l*=-1,""==rHelper.data.products[e].dependantFactories&&(l=0)):u=rHelper.methods.CALC_factoryCashCostPerHour(e)),o=l*a,l<0&&(o*=rHelper.data.buildings[9].transportCost,s="coral"),o=Math.round(o-u),t){case"material":rHelper.data.material[e].effectiveTurnover=o;break;case"product":rHelper.data.products[e].effectiveTurnover=o}return r.css("color",s).text(o.toLocaleString("en-US")),rHelper.methods.INSRT_flowSurplus(e,t,l),o},INSRT_warehouseFillAmount(e,t){"use strict";$(`#warehouse-${t}-stock-current-${e}`).val(rHelper.data[t][e].warehouse.fillAmount)},INSRT_warehouseLevel(e,t){"use strict";let r=rHelper.data[t][e].warehouse.level;$(`#warehouse-${t}-level-${e}`).val(r),$(`#warehouse-${t}-stock-current-${e}`).attr("max",rHelper.methods.CALC_warehouseContingent(r))},INSRT_warehouseFillStatus(e,t){"use strict";let r=$(`#warehouse-${t}-fill-percent-${e}`),a=(100*rHelper.data[t][e].warehouse.fillStatus).toFixed(2),o="rgb(255, 38, 41)";a<75?o="rgb(70, 252, 6)":a>=75&&a<90?o="rgb(255, 252, 38)":a>=90&&a<95&&(o="rgb(255, 155, 38)"),r.text(a).css("color",o)},INSRT_warehouseCapacity(e,t){"use strict";$(`#warehouse-${t}-stock-cap-${e}`).text(rHelper.data[t][e].warehouse.contingent.toLocaleString("en-US"))},INSRT_warehouseWorth(e,t){"use strict";let r,a=rHelper.methods.CALC_warehouseWorth(e,t)*rHelper.data[t][e].warehouse.fillAmount;$(`#warehouse-${t}-worth-${e}`).text(a.toLocaleString("en-US"))},INSRT_warehouseTotalWorth(){"use strict";let e=rHelper.methods.CALC_warehouseTotalWorth();$("#warehouse-total-worth").text(e.toLocaleString("en-US"))},INSRT_warehouseTotalLevel(){"use strict";let e=rHelper.methods.CALC_warehouseTotalLevel();$("#warehouse-total-level").text(e.toLocaleString("en-US"))},INSRT_warehouseRemainingTimeToFull(e,t){"use strict";let r=rHelper.methods.CALC_warehouseRemainingTimeToFull(e,t);$(`#warehouse-${t}-remaining-${e}`).text(r)},INSRT_warehouseUpgradeCost(e,t,r){"use strict";let a=$(`#warehouse-${t}-upgrade-cost-${e}`),o=rHelper.methods.CALC_warehouseUpgradeCostOnInput(e,t,r);a.text(o.toLocaleString("en-US"))},INSRT_buildingName(e){"use strict";$(`#buildings-name-${e}`).text(rHelper.data.buildings[e].name)},INSRT_buildingData(e){"use strict";let t=rHelper.data.buildings[e],r=t.level,a=$(`#buildings-level-${e}`);parseInt(a.val())!=r&&$(a[0][r]).attr("selected","true");let o=0,l=0;if(10!=r){rHelper.methods.SET_buildingTableVisibility(e,"show");for(let a=0;a<=3;a+=1)if(0===a){let a=$(`#buildings-cash-${e}`),l=t.materialAmount0[r];void 0===l&&(l=0),o+=l,a.text(l.toLocaleString("en-US"))}else{let s=`materialAmount${a}`,u=rHelper.methods.CALC_convertId(t.material[a]);$(`#buildings-mat-${a}-${e}`).addClass(u.icon);let i=t[s][r];if("number"==typeof i){$(`#buildings-amount-${a}-${e}`).text(i.toLocaleString("en-US"));let r,s=rHelper.methods.CALC_returnPriceViaId(t.material[a])*i,u=(rHelper.data.buildings[9].transportCost-1)*s;o+=s,l+=u,$(`#buildings-worth-${a}-${e}`).text(s.toLocaleString("en-US")),$(`#buildings-transportation-${a}-${e}`).text(u.toLocaleString("en-US"))}}}else rHelper.methods.SET_buildingTableVisibility(e,"hide");$(`#buildings-sum-${e}`).text(o.toLocaleString("en-US")),$(`#buildings-transportation-sum-${e}`).text(Math.round(l).toLocaleString("en-US"))},INSRT_buildingToLevel10(e){"use strict";let t=rHelper.methods.CALC_buildingToLevel10(e);$(`#buildings-cap-${e}`).text(t.level10Cost.toLocaleString("en-US")),$(`#buildings-transportation-cap-${e}`).text(t.level10Transportation.toLocaleString("en-US"))},INSRT_techUpgradeRows(e){"use strict";let t=$("#techupgrades-combinations-tbl tbody");t[0].childNodes.length>0&&t.empty();let r=[];for(let e=46;e<=49;e+=1)r.push(rHelper.methods.CALC_returnPriceViaId(e,0));$.each(rHelper.tu,(a,o)=>{if(void 0===e&&0!=o.tu4)return;let l=$(crEl("tr"));for(let e=0;e<=6;e+=1){let t=$(crEl("td"));t.addClass("text-md-right text-sm-left");let a=[o.tu1,o.tu2,o.tu3,o.tu4];switch(e){case 0:case 1:case 2:case 3:t.text(a[e]).attr("data-th",`Tech-Upgrade ${e}`);break;case 4:t.text(o.factor).attr("data-th","Boost");break;case 5:let l=0;for(let e=0;e<a.length;e+=1)l+=a[e]*r[e];t.text(l.toLocaleString("en-US")).attr("data-th","Price");break;case 6:let s=1*a[0]+2*a[1]+3*a[2]+5*a[3];t.text(s).attr("data-th","Pimp my mine count")}l.append(t[0])}t.append(l[0])})},INSRT_techUpgradeCalculator(e,t){"use strict";toggleTechUpgradeInfo("start");let r=$("#techupgrades-calc-tbl");"none"==r.css("display")&&r.css("display","table");let a=$("#techupgrades-calc-tbl tbody");a.empty();let o=`api/getTechCombination.php?factor=${e}`;"string"==typeof t&&(o+="&tu4=allowed"),$.getJSON(o,e=>{let t=[];for(let e=46;e<=49;e+=1)t.push(rHelper.methods.CALC_returnPriceViaId(e,0));$.each(e,(e,r)=>{let o=$(crEl("tr"));for(let e=0;e<=6;e+=1){let a=$(crEl("td"));a.addClass("text-md-right text-sm-left"),a.attr("data-th",`missing Tech-Upgrade ${e+1}`);let l=[r.tu1,r.tu2,r.tu3,r.tu4];switch(e){case 0:case 1:case 2:case 3:a.text(l[e]);break;case 4:a.text(r.factor).attr("data-th","resulting Boost");break;case 5:let o=0;for(let e=0;e<l.length;e+=1)o+=l[e]*t[e];a.text(o.toLocaleString("en-US")).attr("data-th","Price");break;case 6:let s=1*l[0]+2*l[1]+3*l[2]+5*l[3];a.text(s).attr("data-th","remaining Pimp my mine count")}o.append(a)}a.append(o)}),sorttable.makeSortable(r[0]),sorttable.innerSortFunction.apply($("#techupgrades-calc-tbl th")[5],[]),sorttable.innerSortFunction.apply($("#techupgrades-calc-tbl th")[5],[]),toggleTechUpgradeInfo("end")}).fail(()=>{let e=$(crEl("tr")),t=$(crEl("td"));t.addClass("text-warning text-center").attr("data-th","Attention").attr("colspan",7).text("No entries found or invalid value. Try to lower the value a bit – up to 5 decimals are allowed (e.g. 3.00005)."),e.append(t),a.append(e),toggleTechUpgradeInfo("end")})},INSRT_recyclingRequirement(e){"use strict";$(`#recycling-requirement-${e}`).text(rHelper.methods.CALC_recyclingRequirement(e).toLocaleString("en-US"))},INSRT_recyclingProducts(e){"use strict";let t=rHelper.data.buildings[5].level,r=rHelper.methods.CALC_recyclingProducts(e,t);$(`#recycling-products-${e}`).html(r)},INSRT_recyclingOutputWorth(e){"use strict";let t=rHelper.data.buildings[5].level;$(`#recycling-output-${e}`).text(rHelper.methods.CALC_recyclingOutputWorth(e,t).toLocaleString("en-US"))},INSRT_recyclingInputWorth(e){"use strict";$(`#recycling-input-${e}`).text(rHelper.methods.CALC_recyclingInputWorth(e).toLocaleString("en-US"))},INSRT_unitsRecyclingProfit(e,t){"use strict";let r=$(`#${e}-profit-${t}`),a=0,o,l;"recycling"==e?a=rHelper.methods.CALC_recyclingProfit(t):"units"==e&&(a=rHelper.methods.CALC_unitsProfit(t)),l=a>0?"#9acd3225":"#ff7f5025",$(r[0].parentNode).css("background-color",l),o=a.toFixed(2).toLocaleString("en-US")+"%",r.text(o)},INSRT_unitsCraftingPrice(e){"use strict";$(`#units-crafting-${e}`).text(rHelper.methods.CALC_unitsCraftingPrice(e).toLocaleString("en-US"))},INSRT_unitsPricePerStrength(e){"use strict";$(`#units-pps-${e}`).text(rHelper.methods.CALC_unitsPricePerStrength(e).toLocaleString("en-US"))},INSRT_unitsMarketPrice(e){"use strict";let t=e+52,r=rHelper.methods.CALC_returnPriceViaId(t);rHelper.data.units[e].profit.marketPrice=r,$(`#units-market-${e}`).text(r.toLocaleString("en-US"))},INSRT_companyWorth(){"use strict";let e=rHelper.methods.CALC_companyWorth();$("#company-worth").text(e.toLocaleString("en-US"))},INSRT_headquarterOvwTransportation(e){"use strict";let t=rHelper.data.headquarter[e];if($.isArray(t.material)){let t=rHelper.methods.CALC_headquarterLevelCost(e),r=Math.round(t*(rHelper.data.buildings[9].transportCost-1));$(`#hq-ovw-transportation-${e}`).text(r.toLocaleString("en-US"))}},INSRT_headquarterOvwCost(e){"use strict";let t=rHelper.methods.CALC_headquarterLevelCost(e);$(`#hq-ovw-sum-${e}`).text(t.toLocaleString("en-US"))},INSRT_headquarterOvwRadius(e){"use strict";let t=rHelper.data.headquarter[e];$(`#hq-ovw-radius-${e}`).text(`${t.radius} m | ${rHelper.methods.CALC_convertMeterToYards(t.radius)} yards`)},INSRT_headquarterOvwBoost(e){"use strict";let t=rHelper.data.headquarter[e];$(`#hq-ovw-boost-${e}`).text(t.boost)},INSRT_headquarterOvwString(e){"use strict";let t=rHelper.data.headquarter[e];if($.isArray(t.material)){let r=`${rHelper.methods.CALC_headquarterOvwMaterial(e)} x ${t.amount.toLocaleString("en-US")}`;$(`#hq-ovw-mat-${e}`).html(r)}},INSRT_headquarterContentRequiredAmount(e){"use strict";let t=$("#hq-content");if(10!=e){t.css("display","block");let r=rHelper.data.headquarter[e],a=r.amount;$.each(r.material,(e,t)=>{let r=rHelper.methods.CALC_headquarterContentIcon(t),o=rHelper.methods.CALC_headquarterContentRequiredAmount(a);$(`#hq-content-icon-${e}`).html(r),$(`#hq-content-requirement-${e}`).html(o)})}else t.css("display","none")},INSRT_headquarterPaid(){"use strict";let e=rHelper.data.headquarter.user.paid;$.each(e,(e,t)=>{$(`#hq-content-paid-${e}`).val(t)})},INSRT_headquarterMissing(e){"use strict";let t=rHelper.data.headquarter.user.level;if(10!=t){let r,a,o=rHelper.data.headquarter[t].amount-rHelper.data.headquarter.user.paid[e];o<0&&(o=0),$(`#hq-content-missing-${e}`).text(o.toLocaleString("en-US"))}},INSRT_headquarterRemainingCost(e){"use strict";if(10!=e){let t=rHelper.data.headquarter[e],r=0,a=0;$.each(t.material,(t,o)=>{let l=rHelper.methods.CALC_headquarterRemainingCost(t,o,e);r+=l;let s=Math.round(l*(rHelper.data.buildings[9].transportCost-1));a+=s,$(`#hq-content-cost-${t}`).text(l.toLocaleString("en-US")),$(`#hq-content-transportation-${t}`).text(s.toLocaleString("en-US"))}),rHelper.methods.INSRT_headquarterTotalCost(r),rHelper.methods.INSRT_headquarterTotalTransportation(a)}},INSRT_headquarterTotalCost(e){"use strict";$("#hq-content-cost-sum").text(e.toLocaleString("en-US"))},INSRT_headquarterTotalTransportation(e){"use strict";$("#hq-content-transportation-sum").text(e.toLocaleString("en-US"))},INSRT_priceHistoryName(e,t){"use strict";$(`#pricehistory-${e}-${t}`).text(rHelper.data[e][t].name)},INSRT_qualityComparator(e,t){"use strict";e&&null!=e||(e=0),t?t/=100:t=1;let r,a=rHelper.methods.CALC_returnPriceViaId(e)*rHelper.data.material[e].maxRate*t;$("#qualitycomparator-income").text(a.toLocaleString("en-US")),$.each(rHelper.data.material,(t,r)=>{let o=$(`#qualitycomparator-${t}`),l=$(o[0].parentNode.parentNode),s=rHelper.methods.CALC_returnPriceViaId(t),u=r.maxRate,i=a/s;if(t==e||i>u)l.css("opacity",.1);else{l.css("opacity",1);let e=(i/u*100).toFixed(2);o.text(`${e} %`)}})},INSRT_missions(){"use strict";let e=rHelper.data.missions;if(0!=e.length){let t=Math.round(Date.now()/1e3),r=(e,t)=>{let r,a=0,o=0,l=0;if(-1==[9,12,17,21,22,25,30,31,32,35,37,38,41,42,43,44,50,55].indexOf(e))switch(e){case 10:l+=rHelper.data.units[5].profit.craftingPrice*t.goal;break;case 11:case 26:case 28:case 31:case 39:26==e?a=29:28==e?a=21:31==e?a=20:39==e&&(a=25),l+=(o=rHelper.methods.CALC_returnPriceViaId(a)*t.goal)*rHelper.data.buildings[9].transportCost-o;break;case 14:l+=rHelper.methods.CALC_currentScanCost()*t.goal;break;case 33:let r;l+=(()=>{let e=1/0;return $.each(rHelper.data.units,(t,r)=>{if(1==t||4==t||5==t){let t=r.profit.craftingPrice,a=r.profit.marketPrice*rHelper.data.buildings[9].transportCost,o=0;(o=a>t?t:a)<e&&(e=o)}}),e})()*t.goal;break;case 45:l+=t.goal/5*100}return l},a=(e,t)=>{let r=t.rewardId,a=0;if(-1!=r){$(`#mission-reward-${e}`).addClass(rHelper.methods.CALC_convertId(r).icon);let o=rHelper.methods.CALC_returnPriceViaId(r);a+=t.rewardAmount*o}else $(`#mission-reward-${e}`).text("Cash"),a+=t.rewardAmount;return a},o=e=>{let t="coral";return e>0&&(t="yellowgreen"),t},l=(e,t)=>{let l=parseInt(e),s,u,i=a(e,t)-r(l,t),n=o(i);50!=l&&55!=l&&31!=l&&$(`#mission-profit-${e}`).text(i.toLocaleString("en-US")).css("color",n)},s=e=>{let t="coral";return e>33&&e<66?t="orange":e>=66&&(t="yellowgreen"),t},u=(e,t)=>e/t*100,i=(e,t)=>{let r=t-e;return r<60?r+"s":r>=60&&r<3600?(r/60).toFixed(2)+"m":r>=3600&&r<86400?(r/3600).toFixed(2)+"h":(r/86400).toFixed(2)+"d"},n=(e,r)=>{let a=i(t,r.cooldown);$(`#mission-progress-${e}`).attr("colspan",3).html('Mission on cooldown for <span style="color: orange;">'+a+"</span>").css("text-align","center"),$(`#mission-start-${e}`).remove(),$(`#mission-end-${e}`).remove(),$(`#mission-${e}`).addClass("faded-mission")},c=e=>{$(`#mission-${e}`).addClass("yellowgreen-10")},d=(e,t)=>{$(`#mission-duration-${e}`).text(t.duration/24),$(`#mission-goal-${e}`).text(t.goal.toLocaleString("en-US")),$(`#mission-interval-${e}`).text(t.intervalDays),$(`#mission-penalty-${e}`).text(t.penalty.toLocaleString("en-US")),$(`#mission-reward-amount-${e}`).text(t.rewardAmount.toLocaleString("en-US"))},p=(e,r)=>{let a=u(r.progress,r.goal);$(`#mission-progress-bar-${e}`).css({width:a+"%","background-color":s(a)}),$(`#mission-start-${e}`).text(rHelper.methods.CALC_convertDateToIso(rHelper.methods.CALC_toMilliseconds(r.startTimestamp))),$(`#mission-end-${e}`).text(i(t,r.endTimestamp))},h=e=>{$(`#mission-progress-wrap-${e}`).css("display","none")},m=(e,t)=>{1==t.status?p(e,t):h(e,t)};$.each(e,(e,r)=>{l(e,r),d(e,r),r.cooldown>t?n(e,r):c(e),m(e,r)})}},CALC_attackLogDetailedUnitStringInsertion(e,t){let r="",a;return"offense"==e?a=[0,2,3]:"defense"==e&&(a=[5,4,1]),$.each(t,(e,t)=>{0!=t&&(r+=' <span class="resources-unit-'+a[e]+'"></span> '+t.toLocaleString("en-US"))}),r},CALC_attackLogDetailedDatasetIteration(e,t,r){let a=$(crEl("tr")).addClass(rHelper.methods.CALC_attackLogSetTRColor(t.result)),o="text-md-right text-sm-left",l="bg-success-25";for(let e=0;e<=7;e+=1){let s=$(crEl("td")).attr("data-th",r[e]);switch(e){case 0:s.text(`${t.target} (${t.targetLevel})`);break;case 1:s.html(rHelper.methods.CALC_attackLogDetailedCoordsTimestampString(t));break;case 2:s.html(rHelper.methods.CALC_attackLogDetailedUnitStringInsertion("offense",t.offense.units)).addClass("text-sm-left text-md-center");break;case 3:s.html(rHelper.methods.CALC_attackLogDetailedUnitStringInsertion("defense",t.defense.units)).addClass("text-sm-left text-md-center");break;case 4:t.factor<100&&(l="bg-warning-25"),s.text(t.factor.toLocaleString("en-US")+"%").addClass(`${o} ${l}`);break;case 5:s.html(rHelper.methods.CALC_attackLogDetailedLootString(t.loot));break;case 6:let r=t.profit,a=t.result,u="#dedede";(r<0&&a||!a)&&(u="coral"),s.text(r.toLocaleString("en-US")).addClass(o).css("color",u)}a.append(s)}return a},CALC_attackLogSetTRColor(e){let t="bg-success-25";return e||(t="bg-warning-25"),t},CALC_attackLogDetailedCoordsTimestampString(e){let t=`${e.coordinates.lat}, ${e.coordinates.lon}`,r,a;return`${rHelper.methods.CALC_convertDateToIso(e.attackedAt)} | ${`<a href="https://www.google.com/maps/search/${t}" target="_blank" rel="noopener nofollow noreferrer">${t}</a>`}`},CALC_attackLogDetailedPageButtonToggler(e,t){let r=$(`#attacklog-detailed-${e}`),a="btn-success";"last"==e?0==t.skipCount?r.attr("disabled",!0).removeClass(a):r.attr("disabled",!1).addClass(a):"next"==e&&(t.maxLength>t.skipCount+100?r.addClass(a).attr("disabled",!1):r.removeClass(a).attr("disabled",!0))},CALC_attackLogDetailedLootString(e){let t="";return $.each(e,(e,r)=>{let a=r.type,o="";o=-1==a?'<img src="assets/img/cash.png" alt="Cash" />':'<span class="'+rHelper.methods.CALC_convertId(a).icon+'"></span>',t+=`${o} ${r.amount.toLocaleString("en-US")} `}),t},CALC_convertDateToIso(e){let t=6e4*new Date(e).getTimezoneOffset(),r=new Date(e-t).toISOString().slice(0,-1).match(/(\d{4}\-\d{2}\-\d{2})T(\d{2}:\d{2}:\d{2})/);return`${r[1]} ${r[2]}`},CALC_currentScanCost(){let e=rHelper.data.buildings[0].level,t=rHelper.methods.CALC_totalMineCount();return 5e3*Math.round(1e4*Math.pow(2.4,e)*(1+t/1e3)/5e3)},CALC_toMilliseconds:e=>1e3*e,CALC_mineEstRevenue(e,t,r){"use strict";return Math.round(e.fullRate*rHelper.methods.CALC_returnPriceViaId(t,8)*r*24*e.HQBoost)},CALC_createMapContentString(e,t,r,a,o){"use strict";let l=100*o.quality;return`<div>\n        <h1 class="firstHeading">${e.name}</h1>\n        <div>\n        <p><strong>Built:</strong> ${t}</p>\n        <p><strong>Age (days)</strong>: ${r.toFixed(2)}</p>\n        <p><strong>Estimated revenue (condition always 100%):</strong> ${a.toLocaleString("en-US")}</p>\n        <table class="table table-break-medium mb-3 text-center">\n        <thead>\n        <tr>\n          <th>Raw rate</th>\n          <th>Full rate</th>\n          <th>Tech factor</th>\n          <th>Quality</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td>${o.rawRate.toLocaleString("en-US")}</td>\n          <td>${o.fullRate.toLocaleString("en-US")}</td>\n          <td>${o.techFactor.toLocaleString("en-US")}</td>\n          <td>${l.toFixed(2)}% => ${(l*o.techFactor).toFixed(2)} %</td>\n        </tr>\n        </tbody>\n        </table>\n        </div>\n        </div>`},CALC_headquarterRemainingCost(e,t,r){"use strict";let a=rHelper.methods.CALC_returnPriceViaId(t),o=rHelper.data.headquarter[r].amount-rHelper.data.headquarter.user.paid[e];return o<0&&(o=0),a*o},CALC_headquarterContentIcon(e){"use strict";let t=$(crEl("span"));return t.addClass(rHelper.methods.CALC_convertId(e).icon),t[0].outerHTML},CALC_headquarterContentRequiredAmount(e){"use strict";let t;return $(crEl("span")).html(e.toLocaleString("en-US"))[0].outerHTML},CALC_convertMeterToYards(e){"use strict";return Math.round(1.09361*e)},CALC_headquarterLevelCost(e){"use strict";let t=0,r=rHelper.data.headquarter[e];return $.isArray(r.material)&&$.each(r.material,(e,a)=>{t+=r.amount*rHelper.methods.CALC_returnPriceViaId(a)}),t},CALC_headquarterOvwMaterial(e){"use strict";let t=rHelper.data.headquarter[e],r="";return $.isArray(t.material)&&$.each(t.material,(e,t)=>{let a;t<=13?a=rHelper.data.material[t].icon:t>=14&&t<=35?(t-=14,a=rHelper.data.products[t].icon):t>=36&&t<=51?(t-=36,a=rHelper.data.loot[t].icon):(t-=52,a=rHelper.data.units[t].icon);let o=$(crEl("span")).addClass(a);r+=o[0].outerHTML+" "}),r},CALC_totalBuildingErectionSum(){"use strict";let e=0;return $.each(rHelper.data.buildings,(t,r)=>{for(let t=0;t<r.level;t+=1)$.each(r.material,(a,o)=>{let l=`materialAmount${a}`;e+=-1!=o?rHelper.methods.CALC_returnPriceViaId(o)*r[l][t]:r[l][t]})}),e},CALC_perfectWorth(e){"use strict";let t=0;return"headquarter"==e?$.each(rHelper.data.headquarter,(e,r)=>{$.each(r.material,(e,a)=>{t+=r.amount*rHelper.methods.CALC_returnPriceViaId(a)})}):"buildings"==e&&$.each(rHelper.data.buildings,(e,r)=>{for(let e=0;e<10;e+=1)$.each(r.material,(a,o)=>{let l=`materialAmount${a}`;t+=-1!=o?rHelper.methods.CALC_returnPriceViaId(o)*r[l][e]:r[l][e]})}),t},CALC_companyWorth(){"use strict";let e=0,t=["CALC_totalHeadquarterErectionSum","CALC_totalBuildingErectionSum","CALC_totalFactoryErectionWorth","CALC_totalWarehouseErectionWorth","CALC_totalMineErectionSum"];return $.each(t,(t,r)=>{e+=rHelper.methods[r]()}),e},CALC_totalHeadquarterErectionSum(){"use strict";let e=0,t=rHelper.data.headquarter;if(t.user){let r=t.user,a=r.level;for(let t=a-1;t>=1;t-=1){let r=rHelper.data.headquarter[t];$.each(r.material,(t,a)=>{e+=r.amount*rHelper.methods.CALC_returnPriceViaId(a)})}10!=a&&$.each(r.paid,(t,r)=>{if(0!=r){let o=rHelper.data.headquarter[a-1].material[t];e+=r*rHelper.methods.CALC_returnPriceViaId(o)}})}return e},CALC_totalMineErectionSum(){"use strict";let e=0,t=rHelper.methods.CALC_totalMineCount();return $.each(rHelper.data.material,(r,a)=>{e+=a.basePrice*(1+.01*t)*a.amountOfMines}),Math.round(e)},CALC_totalWarehouseErectionWorth(){"use strict";let e=0,t=["material","products","loot","units"];return $.each(t,(t,r)=>{$.each(rHelper.data[r],(t,r)=>{for(let t=1;t<=r.warehouse.level;t+=1)e+=125e4*Math.pow(t-1,2)})}),e},CALC_totalFactoryErectionWorth(){"use strict";let e=0;return $.each(rHelper.data.products,(t,r)=>{for(let t=0;t<=r.factoryLevel;t+=1)$.each(r.upgradeMaterial,(a,o)=>{let l=Math.pow(t,2)*r.upgradeMaterialAmount[a];e+=-1!=o?l*rHelper.methods.CALC_returnPriceViaId(o):l})}),e},CALC_unitsCraftingPrice(e){"use strict";let t=rHelper.data.units[e],r=t.prices.current.ai,a=t.requiredAmount,o=t.requirements;$.each(o,(e,t)=>{let o=rHelper.methods.CALC_returnPriceViaId(t);r+=o*a[e]});let l,s=1;return void 0!==typeof rHelper.data.settings[3]&&(s=rHelper.data.settings[3].value),1==s&&(r*=rHelper.data.buildings[9].transportCost),r=Math.round(r),t.profit.craftingPrice=r,r},CALC_unitsPricePerStrength(e){"use strict";let t=0,r=0,a=0,o=0,l=rHelper.data.units[e].profit;switch(e){case 0:case 2:case 3:t=rHelper.data.buildings[3].level;break;case 1:case 4:case 5:t=rHelper.data.buildings[4].level}r=rHelper.data.units[e].baseStrength*t;let s=l.marketPrice*rHelper.data.buildings[9].transportCost;return o=s>=l.craftingPrice?l.craftingPrice:s,a=Math.round(o/r)},CALC_unitsProfit(e){"use strict";let t=rHelper.data.units[e].profit,r=100*(1-t.marketPrice/t.craftingPrice);return r*=-1,t.profit=r,r},CALC_recyclingProfit(e){"use strict";let t=rHelper.data.loot[e].profit,r=100*(1-t.outputWorth/t.inputWorth);return r*=-1},CALC_recyclingInputWorth(e){"use strict";let t=rHelper.data.loot[e],r=t.recyclingDivisor,a=e+36,o,l=rHelper.methods.CALC_returnPriceViaId(a,0)*r,s,u=1;return void 0!==typeof rHelper.data.settings[3]&&(u=rHelper.data.settings[3].value),1==u&&(l*=rHelper.data.buildings[9].transportCost),l=Math.round(l),t.profit.inputWorth=l,l},CALC_recyclingOutputWorth(e,t){"use strict";let r=rHelper.data.loot[e].recyclingAmount,a=rHelper.data.loot[e].recyclingProduct,o=0;return $.isArray(a)?$.each(a,(e,a)=>{o+=rHelper.methods.CALC_recyclingOutputWorthHelper(t,a,r,e)}):o+=rHelper.methods.CALC_recyclingOutputWorthHelper(t,a,r),o=Math.round(o),rHelper.data.loot[e].profit.outputWorth=o,o},CALC_recyclingOutputWorthHelper(e,t,r,a){"use strict";let o=rHelper.methods.CALC_returnPriceViaId(t,0),l=r*e,s;return $.isArray(r)&&(l=r[a]*e),l*o},CALC_recyclingRequirement(e){"use strict";return rHelper.data.loot[e].recyclingDivisor},CALC_recyclingProducts(e,t){"use strict";let r=rHelper.data.loot[e].recyclingAmount,a=rHelper.data.loot[e].recyclingProduct,o="";return $.isArray(a)?$.each(a,(e,a)=>{o+=rHelper.methods.CALC_recyclingProductsHelper(t,a,r,e)}):o+=rHelper.methods.CALC_recyclingProductsHelper(t,a,r),o},CALC_recyclingProductsHelper(e,t,r,a){"use strict";let o=rHelper.methods.CALC_convertId(t),l=$(crEl("span")).addClass(o.icon),s=r*e,u;return $.isArray(r)&&(s=r[a]*e),`${l[0].outerHTML} ${s.toLocaleString("en-US")} `},CALC_buildingToLevel10(e){"use strict";let t=rHelper.data.buildings[e],r,a=0,o=0;for(let e=t.level;e<10;e+=1)for(let r=0;r<=3;r+=1)if(0===r){let r;a+=t.materialAmount0[e]}else{let l,s=t[`materialAmount${r}`][e];if("number"==typeof s){let e,l=rHelper.methods.CALC_returnPriceViaId(t.material[r])*s,u;a+=l,o+=(rHelper.data.buildings[9].transportCost-1)*l}}return{level10Cost:a,level10Transportation:Math.round(o)}},CALC_warehouseUpgradeCost(e){"use strict";return 125e4*Math.pow(e-1,2)},CALC_warehouseCostFromTo(e,t){"use strict";let r=0;for(let a=t;a>e;a-=1)r+=rHelper.methods.CALC_warehouseUpgradeCost(a);return r},CALC_warehouseContingent(e){"use strict";return 5e3*Math.pow(e,2)},CALC_warehouseUpgradeCostContigentBased(e,t){"use strict";let r=0,a=Math.ceil(Math.sqrt(t/5e3));return r+=rHelper.methods.CALC_warehouseCostFromTo(e,a)},CALC_warehouseUpgradeCostOnInput(e,t,r){"use strict";let a=$(`#warehouse-${t}-calc-1-${e}`).val(),o=rHelper.data[t][e].warehouse.level,l=0;switch(a){case"level":l=rHelper.methods.CALC_warehouseCostFromTo(o,r);break;case"contingent":l=rHelper.methods.CALC_warehouseUpgradeCostContigentBased(o,r)}return l},CALC_warehouseWorth(e,t){"use strict";let r=0,a=0;switch(t){case"material":a=e;break;case"products":a=e+14;break;case"loot":a=e+36;break;case"units":a=e+51}return r=rHelper.methods.CALC_returnPriceViaId(a)},CALC_warehouseRemainingTimeToFull(e,t){"use strict";let r=rHelper.data[t][e],a=r.warehouse.contingent-r.warehouse.fillAmount,o=0,l=1;return"material"==t?l=r.perHour:"products"==t&&(l=r.scaling*r.factoryLevel*rHelper.methods.CALC_factoryMinWorkload(e)),o=a/l,o=isNaN(o)||"products"==t&&r.turnover<=0||"loot"==t||"units"==t?"∞":o>24?`> ${(o/24).toFixed(2)} days`:`> ${o.toFixed(2)} hours`},CALC_warehouseTotalLevel(){"use strict";let e=0,t=["material","products","loot","units"];return $.each(t,(t,r)=>{$.each(rHelper.data[r],(t,r)=>{e+=r.warehouse.level})}),e},CALC_warehouseTotalWorth(){"use strict";let e=0,t=["material","products","loot","units"];return $.each(t,(t,r)=>{$.each(rHelper.data[r],(t,a)=>{e+=rHelper.methods.CALC_warehouseWorth(t,r)*a.warehouse.fillAmount})}),e},CALC_flowDistributionHelper(e,t,r,a){"use strict";let o=0,l=0,s=0,u={},i=0,n="",c='<svg xmlns="http://www.w3.org/2000/svg" width="15" fill="#fff" viewBox="0 0 31.49 31.49"><path d="M21.205 5.007c-.429-.444-1.143-.444-1.587 0-.429.429-.429 1.143 0 1.571l8.047 8.047H1.111C.492 14.626 0 15.118 0 15.737c0 .619.492 1.127 1.111 1.127h26.554l-8.047 8.032c-.429.444-.429 1.159 0 1.587.444.444 1.159.444 1.587 0l9.952-9.952c.444-.429.444-1.143 0-1.571l-9.952-9.953z"/></svg>';"material"==e?(l=t-14,u=rHelper.data.products[l],$.isArray(u.dependencies)?(o=u.dependencies.indexOf(r),s=u.requiredAmount[o]):(o=u.dependencies,s=u.requiredAmount)):(l=t,u=rHelper.data.products[t],$.isArray(u.dependencies)?(o=u.dependencies.indexOf(r+14),s=u.requiredAmount[o]):(o=u.dependencies,s=u.requiredAmount)),u.turnover>0&&(i=u.factoryLevel*s),n+=`<span class="resources-${e}-${r}"></span> ${i.toLocaleString("en-US")} ${c} <span class="resources-product-${l}"></span>`;let d="",p=u.name;switch(e){case"material":d=rHelper.data.material[r].name;break;case"product":d=rHelper.data.products[r].name}return $(`#flow-${e}-distribution-${r}-${a}`).html(n).attr("data-th",`${d} to ${p}`),i},CALC_flowDistribution(e,t){"use strict";let r=0,a={},o=0;switch(t){case"material":r=(a=rHelper.data.material[e]).perHour;break;case"product":let o,l,s;r=(a=rHelper.data.products[e]).factoryLevel*a.scaling*rHelper.methods.CALC_factoryMinWorkload(e)}let l=a.dependantFactories;return $.isArray(l)?$.each(l,(r,a)=>{o+=rHelper.methods.CALC_flowDistributionHelper(t,a,e,r)}):""!=l&&(o+=rHelper.methods.CALC_flowDistributionHelper(t,l,e,0)),r-o},CALC_flowRate(e,t){"use strict";let r=0;switch(t){case"material":r=rHelper.data.material[e].perHour;break;case"product":let a=rHelper.data.products[e],o=rHelper.methods.CALC_factoryMinWorkload(e);r=a.factoryLevel*a.scaling*o}return r},CALC_factoryMinWorkload(e){"use strict";let t=rHelper.data.products[e].dependencyWorkload.min();return t>1&&(t=1),t},CALC_diamondTotalProfit(){"use strict";let e=0;return $.each(rHelper.data.products,(t,r)=>{let a=r.diamond.profit;a>0&&(e+=a)}),e},CALC_diamondTop10Profit(){"use strict";let e=[];$.each(rHelper.data.products,(t,r)=>{let a=r.diamond.profit;a>0&&e.push(a)});let t=0;e=e.sort((e,t)=>t-e);for(let r=0;r<=9;r+=1)e[r]&&(t+=e[r]);return t},CALC_diamondEfficiency(e){"use strict";let t=rHelper.data.products[e].diamond,r=t.outputWorth/(t.dependenciesWorth+t.productionCost);return isNaN(r)&&(r=0),t.efficiency=r,r},CALC_diamondProfit(e){"use strict";let t=rHelper.data.products[e].diamond;return t.profit=t.outputWorth-(t.dependenciesWorth+t.productionCost),t.profit},CALC_nextGreaterWarehouseLevel(e){"use strict";return Math.ceil(Math.sqrt(e/5e3))},CALC_diamondFactoryOutput(e){"use strict";let t=rHelper.data.products[e],r=t.factoryLevel*t.scaling*5*24,a=120*t.cashPerHour;return 0==t.factoryLevel&&(a=0),rHelper.data.products[e].diamond={outputWorth:r*rHelper.methods.CALC_returnPriceViaId(e+14),dependenciesWorth:0,productionCost:a,efficiency:0,profit:0},t.factoryLevel*t.scaling*5*24},CALC_dependantFactoriesHelper(e,t){"use strict";"material"==t&&(e-=14);let r=["INSRT_factoryDependencies","INSRT_factoryWorkload","INSRT_factoryTurnover","INSRT_factoryTurnoverPerUpgrade","INSRT_factoryROI"];$.each(r,(t,r)=>{rHelper.methods[r](e)}),rHelper.methods.INSRT_factoryHighlightColumns(),""!=rHelper.data.products[e].dependantFactories&&rHelper.methods.CALC_dependantFactories(e,"product")},CALC_dependantFactories(e,t){"use strict";let r="";switch(t){case"material":r=rHelper.data.material[e].dependantFactories;break;case"product":r=rHelper.data.products[e].dependantFactories}$.isArray(r)?$.each(r,(e,r)=>{rHelper.methods.CALC_dependantFactoriesHelper(r,t)}):""!=r&&rHelper.methods.CALC_dependantFactoriesHelper(r,t)},CALC_factoryTurnoverPerUpgrade(e){"use strict";let t=0,r=[],a=rHelper.data.products[e].dependencies;if($.isArray(a))$.each(a,t=>{let a=rHelper.methods.CALC_factoryDepedencyWorkload(e,t,"nextLevel");r.push(a)});else{let t=rHelper.methods.CALC_factoryDepedencyWorkload(e,0,"nextLevel");r.push(t)}let o=r.min();return o>1&&(o=1),(t=parseInt(rHelper.methods.CALC_factoryTurnover(e,"nextLevel",o)-rHelper.data.products[e].turnover))<10&&t>-10&&(t=0),t},CALC_factoryDependencyExistingAmount(e,t){"use strict";return e.perHour?e.perHour:e.factoryLevel*e.scaling},CALC_factoryWorkloadMinNonSanitized(e){"use strict";return rHelper.data.products[e].dependencyWorkload.min()},CALC_factoryCashCostPerHour(e,t){"use strict";let r=rHelper.data.products[e],a=r.factoryLevel;return t&&(a+=1),r.cashPerHour*a},CALC_factoryTurnover(e,t,r){"use strict";let a=rHelper.data.products[e],o=rHelper.methods.CALC_returnPriceViaId(e+14),l=a.factoryLevel,s=rHelper.methods.CALC_factoryCashCostPerHour(e,t),u=rHelper.methods.CALC_factoryMinWorkload(e),i=0;t&&(l+=1,u=r);let n=a.scaling*l*o,c;if($.isArray(a.dependencies))$.each(a.dependencies,r=>{let a=rHelper.methods.CALC_factoryDependencyWorth(e,r,t);i+=a});else{let r=rHelper.methods.CALC_factoryDependencyWorth(e,0,t);i+=r}return(n-i-s)*u},CALC_factoryDependencyWorth(e,t,r){"use strict";let a=rHelper.data.products[e],o=a.factoryLevel,l=0,s=0;return r&&(o+=1),$.isArray(a.dependencies)?(l=a.requiredAmount[t],s=rHelper.methods.CALC_returnPriceViaId(a.dependencies[t])):(l=a.requiredAmount,s=rHelper.methods.CALC_returnPriceViaId(a.dependencies)),o*l*s},CALC_factoryDepedencyWorkload(e,t,r){"use strict";let a=0,o=rHelper.data.products[e],l=o.factoryLevel,s,u,i=0;r&&(l+=1),$.isArray(o.dependencies)?(s=o.dependencies[t],u=o.requiredAmount[t]):(s=o.dependencies,u=o.requiredAmount);let n=u*l;if(s<=13)i=rHelper.data.material[s].perHour;else{let e=rHelper.methods.CALC_convertId(s),t=e.dependencyWorkload.min();t>1&&(t=1),i=e.factoryLevel*e.scaling*t}return a=i/n,(isNaN(a)||a===1/0)&&(a=0),a},CALC_factoryROI(e){"use strict";return rHelper.data.products[e].upgradeCost/rHelper.data.products[e].turnoverIncrease/24},CALC_factoryComparatorRequiredVsExistingAmount(e,t){"use strict";let r;return isNaN(t)&&(t=0),r=t<e?'class="faulty-dependency"':""},CALC_factoryDependencyRequiredAmount(e,t){"use strict";let r=rHelper.data.products[e],a=0;return(a=$.isArray(r.requiredAmount)?r.requiredAmount[t]:r.requiredAmount)*r.factoryLevel},CALC_totalFactoryUpgrades(){"use strict";let e=0;return $.each(rHelper.data.products,(t,r)=>{e+=r.factoryLevel}),e},CALC_factoryUpgradeCost(e){"use strict";let t=rHelper.data.products[e].factoryLevel;void 0!==t&&t||(t=0);let r=t+1,a=0,o=0,l=$(crEl("table")),s=$(crEl("tbody")),u,i;$.each(rHelper.data.products[e].upgradeMaterialAmount,(t,l)=>{let n=$(crEl("tr")),c=0;if(0===t)for(a+=l*Math.pow(r,2),c=0;c<=2;c+=1){switch(u=$(crEl("td")),c){case 0:let e=$(crEl("img")).attr("src","assets/img/cash.png").attr("alt","Cash");u.append(e[0]);break;case 1:u.addClass("text-right").attr("colspan",3).text(a.toLocaleString("en-US"));break;case 2:i=$(crEl("small")).text("Transportation"),u.addClass("text-right text-warning").append(i[0])}n.append(u[0])}else{let s=rHelper.data.products[e].upgradeMaterial[t],d=l*Math.pow(r,2),p,h=rHelper.methods.CALC_returnPriceViaId(s)*d,m=(rHelper.data.buildings[9].transportCost-1)*h,g;for(a+=h,o+=m,(s+=1)<=13?g="material":s>=14&&s<=35?(s-=14,g="product"):s>=36&&s<=51?(s-=36,g="loot"):(s-=51,g="units"),c=0;c<=4;c+=1){switch(u=$(crEl("td")),c){case 0:u.addClass(`resources-${g}-${s-1}`);break;case 1:u.addClass("text-right").text(d.toLocaleString("en-US"));break;case 2:u.text("≙");break;case 3:u.addClass("text-right").text(h.toLocaleString("en-US"));break;case 4:i=$(crEl("small")).addClass("text-warning").text(m.toLocaleString("en-US")),u.addClass("text-right").append(i[0])}n.append(u[0])}}s.append(n[0])});let n=$(crEl("tr")),c;for(let e=0;e<=1;e+=1)u=$(crEl("td")).addClass("text-right"),0===e?u.attr("colspan",4).text(a.toLocaleString("en-US")):(i=$(crEl("small")).addClass("text-warning").text(o.toLocaleString("en-US")),u.append(i[0])),n.append(u[0]);return s.append(n[0]),l.append(s[0]),rHelper.data.products[e].upgradeCost=a,{sum:a,title:l[0].outerHTML}},CALC_factoryOutput(e){"use strict";let t=rHelper.data.products[e];return t.factoryLevel*t.scaling},CALC_totalMineCount(){"use strict";let e=0;return $.each(rHelper.data.material,(t,r)=>{e+=r.amountOfMines}),e},CALC_totalMineWorth(){"use strict";let e=0;return $.each(rHelper.data.material,t=>{e+=rHelper.methods.CALC_materialRateWorth(t)}),e},CALC_returnPriceViaId(e,t){"use strict";let r=["current","1day","3days","7days","4weeks","3months","6months","1year","max"],a=0;if(void 0===t){let e,t=2;void 0!==typeof rHelper.data.settings[5]&&(t=rHelper.data.settings[5].value),a=r[t]}else"number"==typeof t&&(a=r[t]);let o,l=rHelper.methods.CALC_convertId(e).prices[a];return l.ai>=l.player?l.ai:l.player},CALC_convertId(e){"use strict";return e<=13?rHelper.data.material[e]:e>=14&&e<=35?(e-=14,rHelper.data.products[e]):e>=36&&e<=51?(e-=36,rHelper.data.loot[e]):(e-=52,rHelper.data.units[e])},CALC_materialNewMinePrice(e,t){"use strict";return Math.round(rHelper.data.material[t].basePrice*(1+e/50))},CALC_materialRateWorth(e){"use strict";return rHelper.data.material[e].perHour*rHelper.methods.CALC_returnPriceViaId(e)},CALC_materialMinePerfectIncome(e){"use strict";return rHelper.data.material[e].maxRate*rHelper.methods.CALC_returnPriceViaId(e)},CALC_materialMineROI(e){"use strict";let t=[];for(let r=0;r<=13;r+=1){let a=rHelper.methods.CALC_materialNewMinePrice(rHelper.methods.CALC_totalMineCount(),r),o=rHelper.methods.CALC_materialMinePerfectIncome(r),l=rHelper.methods.CALC_customTUPrice();switch(e){case"100":t.push(a/o/24);break;case"505":t.push((a+l)/o/24/5.05);break;case"505hq":let r=1;rHelper.data.headquarter.user&&(r=rHelper.data.headquarter.user.level);let s=rHelper.data.headquarter[r-1].boost-.9;t.push((a+l)/o/24/5.05/s)}}return t},CALC_customTUPrice(){"use strict";let e=0,t=46,r=rHelper.data.settings[1],a=[111,26,0,0];void 0!==typeof r&&(a=r.value);for(let t=0;t<=3;t+=1)e+=a[t]*rHelper.methods.CALC_returnPriceViaId(46+t);return e}},graphs:{gaugeOptions:{chart:{type:"solidgauge",backgroundColor:"transparent"},title:null,pane:{center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},tooltip:{enabled:!1},yAxis:{minColor:"rgba(255, 127, 80, 0.75)",maxColor:"rgba(154, 205, 50, 0.75)",lineWidth:0,minorTickInterval:null,title:{y:-70},labels:{y:16}},plotOptions:{solidgauge:{dataLabels:{y:5,borderWidth:0,style:{color:"#dedede"},useHTML:!0}}}},material:{target:"graph-material",categories:[],mineData:[],incomeData:[],data:[],colors:["#8a4f3e","#a4938e","#aba59a","#2d2c2b","#8a5a3a","#d8d8d8","#b58359","#b87259","#9b7953","#c4b9ab","#957e60","#cccbc2","#b28b3d","#b0a17d"],reference:{mineCount:0,mineIncome:0},seriesNames:["Mines","Mine income"],responsiveId:"income",titleText:"mine distribution vs mine income"}},data:{},tu:[{tu1:145,tu2:1,tu3:2,tu4:2,factor:5.049546987548256},{tu1:142,tu2:4,tu3:1,tu4:2,factor:5.049537328215894},{tu1:141,tu2:1,tu3:5,tu4:1,factor:5.049975808955912},{tu1:139,tu2:7,tu3:0,tu4:2,factor:5.04952766890201},{tu1:138,tu2:4,tu3:4,tu4:1,factor:5.049966148803255},{tu1:135,tu2:7,tu3:3,tu4:1,factor:5.049956488669072},{tu1:135,tu2:2,tu3:8,tu4:0,factor:5.049909577605985},{tu1:132,tu2:10,tu3:2,tu4:1,factor:5.049946828553374},{tu1:132,tu2:5,tu3:7,tu4:0,factor:5.049899917580023},{tu1:129,tu2:13,tu3:1,tu4:1,factor:5.049937168456153},{tu1:129,tu2:8,tu3:6,tu4:0,factor:5.049890257572537},{tu1:126,tu2:16,tu3:0,tu4:1,factor:5.049927508377411},{tu1:126,tu2:11,tu3:5,tu4:0,factor:5.049880597583531},{tu1:123,tu2:14,tu3:4,tu4:0,factor:5.0498709376130035},{tu1:120,tu2:17,tu3:3,tu4:0,factor:5.0498612776609555},{tu1:117,tu2:20,tu3:2,tu4:0,factor:5.049851617727384},{tu1:114,tu2:23,tu3:1,tu4:0,factor:5.049841957812293},{tu1:111,tu2:26,tu3:0,tu4:0,factor:5.049832297915679},{tu1:99,tu2:0,tu3:0,tu4:13,factor:5.0498315619730025},{tu1:93,tu2:1,tu3:3,tu4:12,factor:5.049765332514903},{tu1:90,tu2:4,tu3:2,tu4:12,factor:5.049755672764868},{tu1:87,tu2:7,tu3:1,tu4:12,factor:5.049746013033308},{tu1:87,tu2:2,tu3:6,tu4:11,factor:5.0496991039254135},{tu1:84,tu2:10,tu3:0,tu4:12,factor:5.04973635332023},{tu1:84,tu2:5,tu3:5,tu4:11,factor:5.049689444302067},{tu1:84,tu2:0,tu3:10,tu4:10,factor:5.049642535719661},{tu1:81,tu2:8,tu3:4,tu4:11,factor:5.049679784697198},{tu1:81,tu2:3,tu3:9,tu4:10,factor:5.049632876204525},{tu1:78,tu2:11,tu3:3,tu4:11,factor:5.049670125110809},{tu1:78,tu2:6,tu3:8,tu4:10,factor:5.049623216707865},{tu1:78,tu2:1,tu3:13,tu4:9,factor:5.049576308740673},{tu1:75,tu2:14,tu3:2,tu4:11,factor:5.049660465542896},{tu1:75,tu2:9,tu3:7,tu4:10,factor:5.0496135572296845},{tu1:75,tu2:4,tu3:12,tu4:9,factor:5.049566649352222},{tu1:72,tu2:17,tu3:1,tu4:11,factor:5.049650805993463},{tu1:72,tu2:12,tu3:6,tu4:10,factor:5.049603897769982},{tu1:72,tu2:7,tu3:11,tu4:9,factor:5.049556989982251},{tu1:72,tu2:2,tu3:16,tu4:8,factor:5.049510082630265},{tu1:71,tu2:4,tu3:15,tu4:8,factor:5.049995472429614},{tu1:69,tu2:20,tu3:0,tu4:11,factor:5.049641146462505},{tu1:69,tu2:15,tu3:5,tu4:10,factor:5.049594238328755},{tu1:69,tu2:10,tu3:10,tu4:9,factor:5.049547330630755},{tu1:69,tu2:5,tu3:15,tu4:8,factor:5.0495004233685},{tu1:68,tu2:7,tu3:14,tu4:8,factor:5.049985812239343},{tu1:68,tu2:2,tu3:19,tu4:7,factor:5.049938900903856},{tu1:66,tu2:18,tu3:4,tu4:10,factor:5.049584578906008},{tu1:66,tu2:13,tu3:9,tu4:9,factor:5.049537671297738},{tu1:65,tu2:10,tu3:13,tu4:8,factor:5.049976152067548},{tu1:65,tu2:5,tu3:18,tu4:7,factor:5.0499292408218},{tu1:65,tu2:0,tu3:23,tu4:6,factor:5.049882330011827},{tu1:63,tu2:21,tu3:3,tu4:10,factor:5.049574919501737},{tu1:63,tu2:16,tu3:8,tu4:9,factor:5.049528011983197},{tu1:62,tu2:13,tu3:12,tu4:8,factor:5.049966491914233},{tu1:62,tu2:8,tu3:17,tu4:7,factor:5.049919580758222},{tu1:62,tu2:3,tu3:22,tu4:6,factor:5.049872670037985},{tu1:60,tu2:24,tu3:2,tu4:10,factor:5.049565260115945},{tu1:60,tu2:19,tu3:7,tu4:9,factor:5.0495183526871354},{tu1:59,tu2:16,tu3:11,tu4:8,factor:5.049956831779397},{tu1:59,tu2:11,tu3:16,tu4:7,factor:5.049909920713121},{tu1:59,tu2:6,tu3:21,tu4:6,factor:5.049863010082621},{tu1:59,tu2:1,tu3:26,tu4:5,factor:5.049816099887894},{tu1:57,tu2:27,tu3:1,tu4:10,factor:5.049555600748631},{tu1:57,tu2:22,tu3:6,tu4:9,factor:5.049508693409551},{tu1:56,tu2:24,tu3:5,tu4:9,factor:5.049994083075359},{tu1:56,tu2:19,tu3:10,tu4:8,factor:5.0499471716630415},{tu1:56,tu2:14,tu3:15,tu4:7,factor:5.049900260686504},{tu1:56,tu2:9,tu3:20,tu4:6,factor:5.049853350145739},{tu1:56,tu2:4,tu3:25,tu4:5,factor:5.049806440040745},{tu1:54,tu2:30,tu3:0,tu4:10,factor:5.049545941399794},{tu1:53,tu2:27,tu3:4,tu4:9,factor:5.049984422887742},{tu1:53,tu2:22,tu3:9,tu4:8,factor:5.049937511565163},{tu1:53,tu2:17,tu3:14,tu4:7,factor:5.049890600678362},{tu1:53,tu2:12,tu3:19,tu4:6,factor:5.049843690227331},{tu1:53,tu2:7,tu3:24,tu4:5,factor:5.049796780212072},{tu1:53,tu2:2,tu3:29,tu4:4,factor:5.04974987063258},{tu1:50,tu2:30,tu3:3,tu4:9,factor:5.049974762718609},{tu1:50,tu2:25,tu3:8,tu4:8,factor:5.049927851485765},{tu1:50,tu2:20,tu3:13,tu4:7,factor:5.0498809406887},{tu1:50,tu2:15,tu3:18,tu4:6,factor:5.049834030327405},{tu1:50,tu2:10,tu3:23,tu4:5,factor:5.049787120401883},{tu1:50,tu2:5,tu3:28,tu4:4,factor:5.049740210912124},{tu1:50,tu2:0,tu3:33,tu4:3,factor:5.049693301858126},{tu1:47,tu2:33,tu3:2,tu4:9,factor:5.04996510256795},{tu1:47,tu2:28,tu3:7,tu4:8,factor:5.049918191424844},{tu1:47,tu2:23,tu3:12,tu4:7,factor:5.049871280717514},{tu1:47,tu2:18,tu3:17,tu4:6,factor:5.049824370445955},{tu1:47,tu2:13,tu3:22,tu4:5,factor:5.049777460610167},{tu1:47,tu2:8,tu3:27,tu4:4,factor:5.049730551210141},{tu1:47,tu2:3,tu3:32,tu4:3,factor:5.049683642245876},{tu1:45,tu2:1,tu3:1,tu4:23,factor:5.04955486484628},{tu1:44,tu2:36,tu3:1,tu4:9,factor:5.049955442435773},{tu1:44,tu2:31,tu3:6,tu4:8,factor:5.0499085313824015},{tu1:44,tu2:26,tu3:11,tu4:7,factor:5.04986162076481},{tu1:44,tu2:21,tu3:16,tu4:6,factor:5.049814710582987},{tu1:44,tu2:16,tu3:21,tu4:5,factor:5.049767800836931},{tu1:44,tu2:11,tu3:26,tu4:4,factor:5.049720891526639},{tu1:44,tu2:6,tu3:31,tu4:3,factor:5.049673982652109},{tu1:44,tu2:1,tu3:36,tu4:2,factor:5.049627074213331},{tu1:42,tu2:4,tu3:0,tu4:23,factor:5.04954520549885},{tu1:41,tu2:39,tu3:0,tu4:9,factor:5.049945782322073},{tu1:41,tu2:34,tu3:5,tu4:8,factor:5.049898871358441},{tu1:41,tu2:29,tu3:10,tu4:7,factor:5.049851960830583},{tu1:41,tu2:24,tu3:15,tu4:6,factor:5.049805050738495},{tu1:41,tu2:19,tu3:20,tu4:5,factor:5.049758141082175},{tu1:41,tu2:14,tu3:25,tu4:4,factor:5.0497112318616155},{tu1:41,tu2:9,tu3:30,tu4:3,factor:5.049664323076817},{tu1:41,tu2:4,tu3:35,tu4:2,factor:5.049617414727771},{tu1:41,tu2:1,tu3:4,tu4:22,factor:5.049983686922897},{tu1:38,tu2:37,tu3:4,tu4:8,factor:5.049889211352958},{tu1:38,tu2:32,tu3:9,tu4:7,factor:5.049842300914835},{tu1:38,tu2:27,tu3:14,tu4:6,factor:5.0497953909124815},{tu1:38,tu2:22,tu3:19,tu4:5,factor:5.049748481345896},{tu1:38,tu2:17,tu3:24,tu4:4,factor:5.04970157221507},{tu1:38,tu2:12,tu3:29,tu4:3,factor:5.049654663520003},{tu1:38,tu2:7,tu3:34,tu4:2,factor:5.049607755260688},{tu1:38,tu2:4,tu3:3,tu4:22,factor:5.049974026755169},{tu1:38,tu2:2,tu3:39,tu4:1,factor:5.0495608474371245},{tu1:35,tu2:40,tu3:3,tu4:8,factor:5.049879551365952},{tu1:35,tu2:35,tu3:8,tu4:7,factor:5.049832641017565},{tu1:35,tu2:30,tu3:13,tu4:6,factor:5.049785731104946},{tu1:35,tu2:25,tu3:18,tu4:5,factor:5.049738821628093},{tu1:35,tu2:20,tu3:23,tu4:4,factor:5.049691912587002},{tu1:35,tu2:15,tu3:28,tu4:3,factor:5.049645003981666},{tu1:35,tu2:10,tu3:33,tu4:2,factor:5.049598095812083},{tu1:35,tu2:7,tu3:2,tu4:22,factor:5.049964366605918},{tu1:35,tu2:5,tu3:38,tu4:1,factor:5.04955118807825},{tu1:35,tu2:2,tu3:7,tu4:21,factor:5.04991745546965},{tu1:35,tu2:0,tu3:43,tu4:0,factor:5.049504280780161},{tu1:34,tu2:2,tu3:42,tu4:0,factor:5.049989670021802},{tu1:32,tu2:43,tu3:2,tu4:8,factor:5.049869891397425},{tu1:32,tu2:38,tu3:7,tu4:7,factor:5.049822981138776},{tu1:32,tu2:33,tu3:12,tu4:6,factor:5.0497760713158915},{tu1:32,tu2:28,tu3:17,tu4:5,factor:5.049729161928772},{tu1:32,tu2:23,tu3:22,tu4:4,factor:5.049682252977412},{tu1:32,tu2:18,tu3:27,tu4:3,factor:5.049635344461809},{tu1:32,tu2:13,tu3:32,tu4:2,factor:5.049588436381957},{tu1:32,tu2:10,tu3:1,tu4:22,factor:5.049954706475151},{tu1:32,tu2:8,tu3:37,tu4:1,factor:5.049541528737853},{tu1:32,tu2:5,tu3:6,tu4:21,factor:5.049907795428617},{tu1:32,tu2:0,tu3:11,tu4:20,factor:5.0498608848178606},{tu1:31,tu2:5,tu3:41,tu4:0,factor:5.049980009842626},{tu1:29,tu2:46,tu3:1,tu4:8,factor:5.049860231447379},{tu1:29,tu2:41,tu3:6,tu4:7,factor:5.049813321278463},{tu1:29,tu2:36,tu3:11,tu4:6,factor:5.0497664115453125},{tu1:29,tu2:31,tu3:16,tu4:5,factor:5.049719502247926},{tu1:29,tu2:26,tu3:21,tu4:4,factor:5.049672593386299},{tu1:29,tu2:21,tu3:26,tu4:3,factor:5.049625684960429},{tu1:29,tu2:16,tu3:31,tu4:2,factor:5.049578776970308},{tu1:29,tu2:13,tu3:0,tu4:22,factor:5.049945046362859},{tu1:29,tu2:11,tu3:36,tu4:1,factor:5.049531869415934},{tu1:29,tu2:8,tu3:5,tu4:21,factor:5.049898135406062},{tu1:29,tu2:3,tu3:10,tu4:20,factor:5.049851224885041},{tu1:28,tu2:8,tu3:40,tu4:0,factor:5.0499703496819315},{tu1:26,tu2:49,tu3:0,tu4:8,factor:5.049850571515811},{tu1:26,tu2:44,tu3:5,tu4:7,factor:5.04980366143663},{tu1:26,tu2:39,tu3:10,tu4:6,factor:5.049756751793213},{tu1:26,tu2:34,tu3:15,tu4:5,factor:5.049709842585562},{tu1:26,tu2:29,tu3:20,tu4:4,factor:5.049662933813666},{tu1:26,tu2:24,tu3:25,tu4:3,factor:5.049616025477527},{tu1:26,tu2:19,tu3:30,tu4:2,factor:5.049569117577137},{tu1:26,tu2:14,tu3:35,tu4:1,factor:5.049522210112495},{tu1:26,tu2:11,tu3:4,tu4:21,factor:5.049888475401987},{tu1:26,tu2:6,tu3:9,tu4:20,factor:5.049841564970703},{tu1:26,tu2:1,tu3:14,tu4:19,factor:5.049794654975186},{tu1:25,tu2:11,tu3:39,tu4:0,factor:5.049960689539718},{tu1:23,tu2:47,tu3:4,tu4:7,factor:5.049794001613272},{tu1:23,tu2:42,tu3:9,tu4:6,factor:5.049747092059591},{tu1:23,tu2:37,tu3:14,tu4:5,factor:5.049700182941672},{tu1:23,tu2:32,tu3:19,tu4:4,factor:5.0496532742595095},{tu1:23,tu2:27,tu3:24,tu4:3,factor:5.0496063660131005},{tu1:23,tu2:22,tu3:29,tu4:2,factor:5.049559458202443},{tu1:23,tu2:17,tu3:34,tu4:1,factor:5.049512550827528},{tu1:23,tu2:14,tu3:3,tu4:21,factor:5.04987881541639},{tu1:23,tu2:9,tu3:8,tu4:20,factor:5.049831905074838},{tu1:23,tu2:4,tu3:13,tu4:19,factor:5.049784995169057},{tu1:22,tu2:19,tu3:33,tu4:1,factor:5.049997940864136},{tu1:22,tu2:14,tu3:38,tu4:0,factor:5.049951029415983},{tu1:20,tu2:50,tu3:3,tu4:7,factor:5.0497843418083965},{tu1:20,tu2:45,tu3:8,tu4:6,factor:5.049737432344448},{tu1:20,tu2:40,tu3:13,tu4:5,factor:5.0496905233162614},{tu1:20,tu2:35,tu3:18,tu4:4,factor:5.0496436147238315},{tu1:20,tu2:30,tu3:23,tu4:3,factor:5.049596706567155},{tu1:20,tu2:25,tu3:28,tu4:2,factor:5.0495497988462255},{tu1:20,tu2:20,tu3:33,tu4:1,factor:5.049502891561041},{tu1:20,tu2:17,tu3:2,tu4:21,factor:5.049869155449271},{tu1:20,tu2:12,tu3:7,tu4:20,factor:5.049822245197458},{tu1:20,tu2:7,tu3:12,tu4:19,factor:5.049775335381408},{tu1:20,tu2:2,tu3:17,tu4:18,factor:5.049728426001126},{tu1:19,tu2:22,tu3:32,tu4:1,factor:5.04998828066914},{tu1:19,tu2:17,tu3:37,tu4:0,factor:5.049941369310724},{tu1:17,tu2:53,tu3:2,tu4:7,factor:5.049774682021998},{tu1:17,tu2:48,tu3:7,tu4:6,factor:5.049727772647783},{tu1:17,tu2:43,tu3:12,tu4:5,factor:5.049680863709329},{tu1:17,tu2:38,tu3:17,tu4:4,factor:5.049633955206633},{tu1:17,tu2:33,tu3:22,tu4:3,factor:5.049587047139687},{tu1:17,tu2:28,tu3:27,tu4:2,factor:5.049540139508489},{tu1:17,tu2:20,tu3:1,tu4:21,factor:5.049859495500633},{tu1:17,tu2:15,tu3:6,tu4:20,factor:5.049812585338551},{tu1:17,tu2:10,tu3:11,tu4:19,factor:5.04976567561224},{tu1:17,tu2:5,tu3:16,tu4:18,factor:5.04971876632169},{tu1:17,tu2:0,tu3:21,tu4:17,factor:5.049671857466898},{tu1:16,tu2:25,tu3:31,tu4:1,factor:5.0499786204926265},{tu1:16,tu2:20,tu3:36,tu4:0,factor:5.049931709223946},{tu1:14,tu2:56,tu3:1,tu4:7,factor:5.049765022254077},{tu1:14,tu2:51,tu3:6,tu4:6,factor:5.049718112969596},{tu1:14,tu2:46,tu3:11,tu4:5,factor:5.049671204120877},{tu1:14,tu2:41,tu3:16,tu4:4,factor:5.0496242957079085},{tu1:14,tu2:36,tu3:21,tu4:3,factor:5.049577387730693},{tu1:14,tu2:31,tu3:26,tu4:2,factor:5.049530480189225},{tu1:14,tu2:23,tu3:0,tu4:21,factor:5.04984983557047},{tu1:14,tu2:18,tu3:5,tu4:20,factor:5.049802925498126},{tu1:14,tu2:13,tu3:10,tu4:19,factor:5.049756015861548},{tu1:14,tu2:8,tu3:15,tu4:18,factor:5.049709106660732},{tu1:14,tu2:3,tu3:20,tu4:17,factor:5.049662197895673},{tu1:13,tu2:28,tu3:30,tu4:1,factor:5.049968960334589},{tu1:13,tu2:23,tu3:35,tu4:0,factor:5.049922049155645},{tu1:11,tu2:59,tu3:0,tu4:7,factor:5.049755362504633},{tu1:11,tu2:54,tu3:5,tu4:6,factor:5.049708453309886},{tu1:11,tu2:49,tu3:10,tu4:5,factor:5.049661544550898},{tu1:11,tu2:44,tu3:15,tu4:4,factor:5.049614636227664},{tu1:11,tu2:39,tu3:20,tu4:3,factor:5.049567728340177},{tu1:11,tu2:34,tu3:25,tu4:2,factor:5.04952082088844},{tu1:11,tu2:21,tu3:4,tu4:20,factor:5.049793265676176},{tu1:11,tu2:16,tu3:9,tu4:19,factor:5.049746356129333},{tu1:11,tu2:11,tu3:14,tu4:18,factor:5.049699447018249},{tu1:11,tu2:6,tu3:19,tu4:17,factor:5.049652538342924},{tu1:11,tu2:1,tu3:24,tu4:16,factor:5.0496056301033505},{tu1:10,tu2:31,tu3:29,tu4:1,factor:5.049959300195031},{tu1:10,tu2:26,tu3:34,tu4:0,factor:5.049912389105826},{tu1:8,tu2:57,tu3:4,tu4:6,factor:5.0496987936686555},{tu1:8,tu2:52,tu3:9,tu4:5,factor:5.049651884999401},{tu1:8,tu2:47,tu3:14,tu4:4,factor:5.049604976765895},{tu1:8,tu2:42,tu3:19,tu4:3,factor:5.0495580689681425},{tu1:8,tu2:37,tu3:24,tu4:2,factor:5.049511161606134},{tu1:8,tu2:24,tu3:3,tu4:20,factor:5.049783605872708},{tu1:8,tu2:19,tu3:8,tu4:19,factor:5.049736696415597},{tu1:8,tu2:14,tu3:13,tu4:18,factor:5.0496897873942475},{tu1:8,tu2:9,tu3:18,tu4:17,factor:5.049642878808654},{tu1:8,tu2:4,tu3:23,tu4:16,factor:5.049595970658812},{tu1:7,tu2:39,tu3:23,tu4:2,factor:5.0499965515092},{tu1:7,tu2:34,tu3:28,tu4:1,factor:5.049949640073952},{tu1:7,tu2:29,tu3:33,tu4:0,factor:5.049902729074482},{tu1:5,tu2:60,tu3:3,tu4:6,factor:5.049689134045903},{tu1:5,tu2:55,tu3:8,tu4:5,factor:5.0496422254663775},{tu1:5,tu2:50,tu3:13,tu4:4,factor:5.049595317322606},{tu1:5,tu2:45,tu3:18,tu4:3,factor:5.049548409614583},{tu1:5,tu2:40,tu3:23,tu4:2,factor:5.049501502342305},{tu1:5,tu2:27,tu3:2,tu4:20,factor:5.049773946087716},{tu1:5,tu2:22,tu3:7,tu4:19,factor:5.049727036720341},{tu1:5,tu2:17,tu3:12,tu4:18,factor:5.049680127788722},{tu1:5,tu2:12,tu3:17,tu4:17,factor:5.04963321929286},{tu1:5,tu2:7,tu3:22,tu4:16,factor:5.0495863112327495},{tu1:5,tu2:2,tu3:27,tu4:15,factor:5.049539403608389},{tu1:4,tu2:42,tu3:22,tu4:2,factor:5.0499868913168635},{tu1:4,tu2:37,tu3:27,tu4:1,factor:5.049939979971354},{tu1:4,tu2:32,tu3:32,tu4:0,factor:5.049893069061621},{tu1:2,tu2:63,tu3:2,tu4:6,factor:5.049679474441627},{tu1:2,tu2:58,tu3:7,tu4:5,factor:5.049632565951837},{tu1:2,tu2:53,tu3:12,tu4:4,factor:5.0495856578977945},{tu1:2,tu2:48,tu3:17,tu4:3,factor:5.049538750279503},{tu1:2,tu2:30,tu3:1,tu4:20,factor:5.049764286321205},{tu1:2,tu2:25,tu3:6,tu4:19,factor:5.049717377043561},{tu1:2,tu2:20,tu3:11,tu4:18,factor:5.049670468201676},{tu1:2,tu2:15,tu3:16,tu4:17,factor:5.049623559795545},{tu1:2,tu2:10,tu3:21,tu4:16,factor:5.0495766518251655},{tu1:2,tu2:5,tu3:26,tu4:15,factor:5.049529744290536},{tu1:1,tu2:45,tu3:21,tu4:2,factor:5.049977231143005},{tu1:1,tu2:40,tu3:26,tu4:1,factor:5.049930319887234},{tu1:1,tu2:35,tu3:31,tu4:0,factor:5.049883409067237},{tu1:1,tu2:2,tu3:30,tu4:14,factor:5.0499682243719946}]};let openedWindow;$("#loading-text").text("fetching data"),void 0!==typeof localStorage.rGame&&1!=getCookie("loggedIn")?(rHelper.data=JSON.parse(localStorage.getItem("rGame")),loadingAnimToggler("hide"),console.log("Found existing data!"),rHelper.init.core()):$.get({url:"api/core.php",success:e=>{switch(rHelper.data=e,localStorage.setItem("rGame",JSON.stringify(e)),loadingAnimToggler("hide"),parseInt(getCookie("loggedIn"))){case 1:console.log("Returning user - fetched existing data!");break;default:console.log("New user - fetched basic data!")}rHelper.init.user()},error:e=>{swal("Error fetching data",`Error message:<br />${e}<br /> Please try again.`,"error")}});