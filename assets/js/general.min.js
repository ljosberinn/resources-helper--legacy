loadingAnimToggler=((e,t)=>{"use strict";$("#loading-text").text(t);let a=["slide-out-bck-center","puff-out-center","roll-out-blurred-left","slit-out-vertical","rotate-out-center"],r=a[Math.floor(Math.random()*a.length)];switch(e){case"hide":$("#loading-container svg").addClass(r),$("#loading-container span").each((e,t)=>{$(t).fadeOut(750)}),window.setTimeout(function(){$("#loading-container").hide(),$("#loading-container svg").removeClass(r),$("#loading-container span").each((e,t)=>{$(t).fadeIn(750)})},750);break;case"show":$("#loading-container").show()}}),getCookie=(e=>{"use strict";let t=e+"=",a,r=decodeURIComponent(document.cookie).split(";");for(let e=0;e<r.length;e++){let a=r[e];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}),crEl=(e=>{"use strict";return document.createElement(e)}),Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.max=function(){return Math.max.apply(null,this)};let applyTippyOnNewElement=e=>{"use strict";e.hasClass("tippied")||tippy(e[0],{dynamicTitle:!0})},changeElementClasses=(e,t,a)=>{"use strict";let r=$(e);$.isArray(t)?$.each(t,(e,t)=>{r.hasClass(t)&&r.removeClass(t)}):r.hasClass(t)&&r.removeClass(t),a&&r.addClass(a)},switchActiveNavigationLink=e=>{"use strict";$(".nav-link").each((t,a)=>{e==a.id?$(a).addClass("active"):$(a).removeClass("active")})},switchActiveModule=e=>{"use strict";$("main > div").each((t,a)=>{e==a.id?$(a).css("display","block"):$(a).css("display","none")})},toggleTab=(e,t)=>{"use strict";switchActiveNavigationLink(e),switchActiveModule(t)},toggleTechUpgradeInfo=e=>{"use strict";let t=$("#techupgrades-loading"),a=$("#techupgrades-finished"),r="",s="";switch(e){case"start":r="flex",s="none";break;case"end":r="none",s="inline-block"}t.css("display",r),a.css("display",s)};$("input").each((e,t)=>{"use strict";$(t).click(()=>{t.select()})}),$("#registration-reset-fields").click(()=>{"use strict";$("#registration-form input").each((e,t)=>{$(t).val("")})}),$("#registration-form").submit(e=>{"use strict";let t=new RegExp("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$"),a=$("#registration-pw-1"),r=$("#registration-pw-2"),s=a.val(),l=r.val();$.each([s,l],(t,a)=>{""===a&&(swal("Error","password empty","error"),e.preventDefault())}),s!==l&&(swal("Error","Passwords do not match","error"),e.preventDefault()),$.each([a,r],(a,r)=>{!1===t.test(r.val())&&(swal("Invalid password type",'minimum of 4 characters including one number\n(e.g. "pas1").',"error"),e.preventDefault())}),null===$("#registration-language").val()&&(swal("Missing language","please select a language","error"),e.preventDefault())}),$("#password-change-form").submit(e=>{"use strict";let t=new RegExp("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$"),a=$("#settings-current-password"),r=$("#settings-new-password-1"),s=$("#settings-new-password-2"),l=r.val(),o=s.val();$.each([a,l,o],(t,a)=>{""===a&&(swal("Error","password empty","error"),e.preventDefault())}),l!==o&&(swal("Error","New passwords do not match","error"),e.preventDefault()),!1===t.test(a.val())&&(swal("Invalid old password",'Your old password does not fit the required pattern: minimum of 4 characters including one number\n(e.g. "pas1").',"error"),e.preventDefault()),$.each([r,s],(a,r)=>{!1===t.test(r.val())&&(swal("Invalid password type",'minimum of 4 characters including one number\n(e.g. "pas1").',"error"),e.preventDefault())})}),$("#login-forgot-password").click(e=>{"use strict";e.preventDefault(),swal({title:"Reset password for...",input:"email",inputPlaceholder:"mail",showCancelButton:!0,confirmButtonText:"Continue"}).then(e=>{e.value&&$.post({url:"api/resetPasswordValidateMail.php",data:{mail:e.value},success:t=>{t.invalid?swal.showValidationError("Account not found."):t.valid&&swal({title:`Security token for '${e.value}'`,input:"text",showCancelButton:!0,confirmButtonText:"Validate",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:t=>new Promise(a=>{$.post({url:"api/resetPassword.php",data:{mail:e.value,token:t},success:e=>{e.invalid?swal.showValidationError("Invalid security token."):e.url&&location.replace(e.url),a()}})})})}})})}),window.setInterval(()=>{"use strict";let e=document.getElementById("loading-dots");e&&(e.innerHTML.length>3?e.innerHTML="":e.innerHTML+=".")},1e3),$("#settings-toggler").on("click",e=>{"use strict";e.preventDefault();let t=$("#module-settings");"block"==t.css("display")?t.css("display","none"):t.css("display","block")}),$("#settings-close").on("click",e=>{"use strict";e.preventDefault(),$("#module-settings").css("display","none")}),$("#api-submit").on("click",function(e){"use strict";e.preventDefault(),this.disabled=!0;let t=$("#api-key").val().replace(/ /g,""),a=!1;if(!t||45!=t.length)return void swal("API Error",`Key missing or too short/long (${t.length} instead of 45 characters)`,"error");let r=["factories","warehouse","buildings","headquarter","mines-summary","mines-detailed","player","attack-log","trade-log","missions"],s=[];$.each(r,(e,t)=>{let a=$(`#api-${t}`);!0===a.prop("checked")&&s.push(parseInt(a.attr("data-query")))}),s.push(0),!0!==$("#api-player-anonymity").prop("checked")&&(a=!0),rHelper.methods.API_init(t,s,a)}),$(".nav-link").each((e,t)=>{$(t).on("click",()=>{toggleTab(t.id,t.dataset.target)})}),$("#techupgrades-toggle").on("click",function(){"use strict";let e;!0===$(this).prop("checked")?(rHelper.methods.INSRT_techUpgradeRows("tu4"),sorttable.innerSortFunction.apply($("#module-techupgrades th")[4],[]),sorttable.innerSortFunction.apply($("#module-techupgrades th")[5],[]),sorttable.innerSortFunction.apply($("#module-techupgrades th")[5],[])):rHelper.methods.INSRT_techUpgradeRows()}),$("#techupgrades-input").on("input",function(){"use strict";let e=$("#techupgrades-calc-tu4-allowance"),t=parseFloat(this.value);t>=1.01&&t<=5&&(!0===e.prop("checked")?rHelper.methods.INSRT_techUpgradeCalculator(t,"tu4Included"):rHelper.methods.INSRT_techUpgradeCalculator(t))}),$("#personalmap-create").on("click",()=>{"use strict";0==rHelper.data.mineMap.length&&rHelper.methods.API_getMineMap()}),$("#worldmap-selector").on("change",function(){"use strict";rHelper.methods.API_getWorldMap(this.value),$("#worldmap").css("display","block")}),$("#qualitycomparator-selector").on("change",function(){"use strict";let e=parseInt(this.value),t=$("#qualitycomparator-quality").val();rHelper.methods.INSRT_qualityComparator(e,t)}),$("#qualitycomparator-quality").on("input",function(){"use strict";let e=$("#qualitycomparator-selector").val(),t=parseInt(this.value);rHelper.methods.INSRT_qualityComparator(e,t)}),$("#attacklog-detailed-selector").on("change",function(){"use strict";let e=this.value,t="attackDetailed",a=rHelper.data.attackLog.skipCount,r;e!=rHelper.data.attackLog.data[0].target&&(a=0),-1==parseInt(e)&&(e=0,a=0),rHelper.methods.API_getAttackLog(t,e,a)}),$("#attacklog-detailed-next").on("click",()=>{"use strict";let e=$("#attacklog-detailed-selector").val(),t="attackDetailed",a=rHelper.data.attackLog.skipCount+100;rHelper.methods.API_getAttackLog(t,e,a)}),$("#attacklog-detailed-last").on("click",()=>{"use strict";let e=$("#attacklog-detailed-selector").val(),t="attackDetailed",a=rHelper.data.attackLog.skipCount-100;rHelper.methods.API_getAttackLog(t,e,a)});