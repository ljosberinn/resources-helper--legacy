loadingAnimToggler=((mode,text)=>{"use strict";$("#loading-text").text(text);let possibleAnimationClasses=["slide-out-bck-center","puff-out-center","roll-out-blurred-left","slit-out-vertical","rotate-out-center"],rndAnimation=possibleAnimationClasses[Math.floor(Math.random()*possibleAnimationClasses.length)];switch(mode){case"hide":$("#loading-container svg").addClass(rndAnimation),$("#loading-container span").each((i,obj)=>{$(obj).fadeOut(750)}),window.setTimeout(function(){$("#loading-container").hide(),$("#loading-container svg").removeClass(rndAnimation),$("#loading-container span").each((i,obj)=>{$(obj).fadeIn(750)})},750);break;case"show":$("#loading-container").show()}}),getCookie=(cname=>{"use strict";let name=cname+"=",decodedCookie,ca=decodeURIComponent(document.cookie).split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}),crEl=(tag=>{"use strict";return document.createElement(tag)}),Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.max=function(){return Math.max.apply(null,this)};let applyTippyOnNewElement=el=>{"use strict";el.hasClass("tippied")||tippy(el[0],{dynamicTitle:!0})},changeElementClasses=(el,rmvClass,addClass)=>{"use strict";let $el=$(el);$.isArray(rmvClass)?$.each(rmvClass,(i,className)=>{$el.hasClass(className)&&$el.removeClass(className)}):$el.hasClass(rmvClass)&&$el.removeClass(rmvClass),addClass&&$el.addClass(addClass)},switchActiveNavigationLink=selectedNav=>{"use strict";$(".nav-link").each((i,navLink)=>{selectedNav==navLink.id?$(navLink).addClass("active"):$(navLink).removeClass("active")})},switchActiveModule=targetId=>{"use strict";$("main > div").each((i,moduleEl)=>{targetId==moduleEl.id?$(moduleEl).css("display","block"):$(moduleEl).css("display","none")}),"module-leaderboard"==targetId&&rHelper.methods.INSRT_leaderboard(),"module-tradelog"==targetId&&rHelper.methods.API_getTradeLog()},toggleTab=(selectedNav,targetId)=>{"use strict";switchActiveNavigationLink(selectedNav),switchActiveModule(targetId)},toggleTechUpgradeInfo=mode=>{"use strict";let loading=$("#techupgrades-loading"),finished=$("#techupgrades-finished"),loadingChange="",finishedChange="";switch(mode){case"start":loadingChange="flex",finishedChange="none";break;case"end":loadingChange="none",finishedChange="inline-block"}loading.css("display",loadingChange),finished.css("display",finishedChange)};$("input").each((i,obj)=>{"use strict";$(obj).click(()=>{obj.select()})}),$("#registration-reset-fields").click(()=>{"use strict";$("#registration-form input").each((i,obj)=>{$(obj).val("")})}),$("#registration-form").submit(event=>{"use strict";let passwordRegex=new RegExp("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$"),pw1El=$("#registration-pw-1"),pw2El=$("#registration-pw-2"),pw1Val=pw1El.val(),pw2Val=pw2El.val();$.each([pw1Val,pw2Val],(i,value)=>{""===value&&(swal("Error","password empty","error"),event.preventDefault())}),pw1Val!==pw2Val&&(swal("Error","Passwords do not match","error"),event.preventDefault()),$.each([pw1El,pw2El],(i,obj)=>{!1===passwordRegex.test(obj.val())&&(swal("Invalid password type",'minimum of 4 characters including one number\n(e.g. "pas1").',"error"),event.preventDefault())}),null===$("#registration-language").val()&&(swal("Missing language","please select a language","error"),event.preventDefault())}),$("#password-change-form").submit(event=>{"use strict";let passwordRegex=new RegExp("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$"),pwOldEl=$("#settings-current-password"),pw1El=$("#settings-new-password-1"),pw2El=$("#settings-new-password-2"),pw1Val=pw1El.val(),pw2Val=pw2El.val();$.each([pwOldEl,pw1Val,pw2Val],(i,value)=>{""===value&&(swal("Error","password empty","error"),event.preventDefault())}),pw1Val!==pw2Val&&(swal("Error","New passwords do not match","error"),event.preventDefault()),!1===passwordRegex.test(pwOldEl.val())&&(swal("Invalid old password",'Your old password does not fit the required pattern: minimum of 4 characters including one number\n(e.g. "pas1").',"error"),event.preventDefault()),$.each([pw1El,pw2El],(i,obj)=>{!1===passwordRegex.test(obj.val())&&(swal("Invalid password type",'minimum of 4 characters including one number\n(e.g. "pas1").',"error"),event.preventDefault())})}),$("#login-forgot-password").click(e=>{"use strict";e.preventDefault(),swal({title:"Reset password for...",input:"email",inputPlaceholder:"mail",showCancelButton:!0,confirmButtonText:"Continue"}).then(result=>{result.value&&$.post({url:"api/resetPasswordValidateMail.php",data:{mail:result.value},success:response=>{response.invalid?swal.showValidationError("Account not found."):response.valid&&swal({title:`Security token for '${result.value}'`,input:"text",showCancelButton:!0,confirmButtonText:"Validate",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:token=>new Promise(resolve=>{$.post({url:"api/resetPassword.php",data:{mail:result.value,token:token},success:response=>{response.invalid?swal.showValidationError("Invalid security token."):response.url&&location.replace(response.url),resolve()}})})})}})})}),window.setInterval(()=>{"use strict";let wait=document.getElementById("loading-dots");wait&&(wait.innerHTML.length>3?wait.innerHTML="":wait.innerHTML+=".")},1e3),$("#settings-toggler").on("click",e=>{"use strict";e.preventDefault();let settings=$("#module-settings");"block"==settings.css("display")?settings.css("display","none"):settings.css("display","block")}),$("#settings-close").on("click",e=>{"use strict";e.preventDefault(),$("#module-settings").css("display","none")}),$("#api-submit").on("click",function(e){"use strict";e.preventDefault(),this.disabled=!0;let key=$("#api-key").val().replace(/ /g,""),anonymity=!1;if(!key||45!=key.length)return void swal("API Error",`Key missing or too short/long (${key.length} instead of 45 characters)`,"error");let API_possibilities=["factories","warehouse","buildings","headquarter","mines-summary","mines-detailed","player","attack-log","trade-log","missions"],queries=[];$.each(API_possibilities,(i,possibility)=>{let el=$(`#api-${possibility}`);!0===el.prop("checked")&&queries.push(parseInt(el.attr("data-query")))}),queries.push(0),!0!==$("#api-player-anonymity").prop("checked")&&(anonymity=!0),rHelper.methods.API_init(key,queries,anonymity)}),$(".nav-link").each((i,navLink)=>{$(navLink).on("click",()=>{toggleTab(navLink.id,navLink.dataset.target)})}),$("#techupgrades-toggle").on("click",function(){"use strict";let el;!0===$(this).prop("checked")?(rHelper.methods.INSRT_techUpgradeRows("tu4"),sorttable.innerSortFunction.apply($("#module-techupgrades th")[4],[]),sorttable.innerSortFunction.apply($("#module-techupgrades th")[5],[]),sorttable.innerSortFunction.apply($("#module-techupgrades th")[5],[])):rHelper.methods.INSRT_techUpgradeRows()}),$("#techupgrades-input").on("input",function(){"use strict";let tu4Allowance=$("#techupgrades-calc-tu4-allowance"),value=parseFloat(this.value);value>=1.01&&value<=5&&(!0===tu4Allowance.prop("checked")?rHelper.methods.INSRT_techUpgradeCalculator(value,"tu4Included"):rHelper.methods.INSRT_techUpgradeCalculator(value))}),$("#personalmap-create").on("click",()=>{"use strict";0==rHelper.data.mineMap.length&&1==getCookie("loggedIn")&&rHelper.methods.API_getMineMap()}),$("#worldmap-selector").on("change",function(){"use strict";rHelper.methods.API_getWorldMap(this.value),$("#worldmap").css("display","block")}),$("#qualitycomparator-selector").on("change",function(){"use strict";let type=parseInt(this.value),quality=$("#qualitycomparator-quality").val();rHelper.methods.INSRT_qualityComparator(type,quality)}),$("#qualitycomparator-quality").on("input",function(){"use strict";let type=$("#qualitycomparator-selector").val(),quality=parseInt(this.value);rHelper.methods.INSRT_qualityComparator(type,quality)}),$("#attacklog-detailed-selector").on("change",function(){"use strict";let target=this.value,type="attackDetailed",skipCount=rHelper.data.attackLog.skipCount,currentTarget;target!=rHelper.data.attackLog.data[0].target&&(skipCount=0),-1==parseInt(target)&&(target=0,skipCount=0),rHelper.methods.API_getAttackLog(type,target,skipCount)}),$("#attacklog-detailed-next").on("click",()=>{"use strict";let target=$("#attacklog-detailed-selector").val(),type="attackDetailed",skipCount=rHelper.data.attackLog.skipCount+100;rHelper.methods.API_getAttackLog(type,target,skipCount)}),$("#attacklog-detailed-last").on("click",()=>{"use strict";let target=$("#attacklog-detailed-selector").val(),type="attackDetailed",skipCount=rHelper.data.attackLog.skipCount-100;rHelper.methods.API_getAttackLog(type,target,skipCount)});